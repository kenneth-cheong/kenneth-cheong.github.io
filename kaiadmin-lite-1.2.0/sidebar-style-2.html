<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Digimetrics - New Look</title>
  <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
  <link rel="icon"
    href="https://mediaonemarketing.com.sg/wp-content/uploads/2023/11/cropped-MediaOne-M-favicon-logo-32x32.png"
    type="image/x-icon" />

  <!-- Fonts and icons -->
  <script src="assets/js/plugin/webfont/webfont.min.js"></script>
  <script>
    WebFont.load({
      google: { families: ["Public Sans:300,400,500,600,700"] },
      custom: {
        families: [
          "Font Awesome 5 Solid",
          "Font Awesome 5 Regular",
          "Font Awesome 5 Brands",
          "simple-line-icons",
        ],
        urls: ["assets/css/fonts.min.css"],
      },
      active: function () {
        sessionStorage.fonts = true;
      },
    });
  </script>

  <!-- CSS Files -->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/plugins.min.css" />
  <link rel="stylesheet" href="assets/css/kaiadmin.min.css" />

  <script src="assets/js/driver.js.iife.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@latest/dist/driver.css" />
</head>

<body>
  <div class="wrapper">
    <!-- Sidebar -->
    <div class="sidebar sidebar-style-2" data-background-color="dark">
      <div class="sidebar-logo">
        <!-- Logo Header -->
        <div class="logo-header" data-background-color="dark">
          <a href="#" class="logo">
            <img src="assets/img/kaiadmin/Digimetrics Logo-02.png" alt="navbar brand" class="navbar-brand"
              height="20" />
          </a>
          <div id="leftNav" class="nav-toggle">
            <button class="btn btn-toggle toggle-sidebar">
              <i class="gg-menu-right"></i>
            </button>
            <button class="btn btn-toggle sidenav-toggler">
              <i class="gg-menu-left"></i>
            </button>
          </div>
          <button class="topbar-toggler more">
            <i class="gg-more-vertical-alt"></i>
          </button>
        </div>
        <!-- End Logo Header -->
      </div>
      <div class="sidebar-wrapper scrollbar scrollbar-inner">
        <div class="sidebar-content">
          <ul class="nav nav-secondary">
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#dashboard" class="collapsed" aria-expanded="false">
                <i class="fas fa-home"></i>
                <p>Dashboard</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="dashboard">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="">
                      <span class="sub-item">Dashboard 1</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="nav-section">
              <span class="sidebar-mini-icon">
                <i class="fa fa-ellipsis-h"></i>
              </span>
              <h4 class="text-section">Components</h4>
            </li>
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#base">
                <i class="fas fa-layer-group"></i>
                <p>SEO</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="base">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="">
                      <span class="sub-item">Keyword Analysis</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Google Crawler Simulator</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Website Technical Audit</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Content Comparison</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">On-Page Recommendations</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Rank Checker</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Schema Generator</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#maps">
                <i class="fas fa-audio-description"></i>
                <p>SEM</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="maps">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="">
                      <span class="sub-item">Landing Page Audit</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Competitors' Ads</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Ads Generator</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Ads Research</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#charts">
                <i class="fas fa-podcast"></i>
                <p>Social Media</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="charts">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="">
                      <span class="sub-item">Persona Generator</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Copy Generator</span>
                    </a>
                  </li>
                  <li>
                    <a href="">
                      <span class="sub-item">Content Checker</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- End Sidebar -->

    <div class="main-panel">
      <div class="main-header">
        <div class="main-header-logo">
          <!-- Logo Header -->
          <div class="logo-header" data-background-color="dark">
            <a href="index.html" class="logo">
              <img src="assets/img/kaiadmin/logo_light.svg" alt="navbar brand" class="navbar-brand" height="20" />
            </a>
            <div class="nav-toggle">
              <button class="btn btn-toggle toggle-sidebar">
                <i class="gg-menu-right"></i>
              </button>
              <button class="btn btn-toggle sidenav-toggler">
                <i class="gg-menu-left"></i>
              </button>
            </div>
            <button class="topbar-toggler more">
              <i class="gg-more-vertical-alt"></i>
            </button>
          </div>
          <!-- End Logo Header -->
        </div>
        <!-- Navbar Header -->
        <nav class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom">
          <div class="container-fluid">

            <div class="collapse navbar-collapse" id="navbarNav">
              <div>
                <div style="margin: 10px" id="seoRow">
                  <ul class="breadcrumbs mb-3">
                    <li class="nav-item">
                      <a href="#"> SEO</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#" style="font-weight:1000;"> Keyword Analysis</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"><i class="fas fa-check-circle" style="color: green; margin-right: 5px;"
                          aria-hidden="true"></i> Rank Checker</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"><i class="fas fa-check-circle" style="color: green; margin-right: 5px;"
                          aria-hidden="true"></i> Content Comparison</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> On-Page Recommendations</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Schema Generator</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Technical Audit</a>
                    </li>
                  </ul>
                </div>
                <div style="margin: 10px" id="semRow">
                  <ul class="breadcrumbs mb-3">
                    <li class="nav-item">
                      <a href="#"> SEM</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Landing Page Audit</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Competitors' Ads</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Ads Research</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Ads Generator</a>
                    </li>
                  </ul>
                </div>
                <div style="margin: 10px" id="smmRow">
                  <ul class="breadcrumbs mb-3">
                    <li class="nav-item">
                      <a href="#"> Social Media</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Persona Generator</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Content Generator</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Content Checker</a>
                    </li>
                  </ul>
                </div>
                <div style="margin: 10px" id="bdRow">
                  <ul class="breadcrumbs mb-3">
                    <li class="nav-item">
                      <a href="#"> BD</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Competitors Identifier</a>
                    </li>
                    <li class="separator">
                      <i class="icon-arrow-right"></i>
                    </li>
                    <li class="nav-item">
                      <a href="#"> Media Plan</a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- Collapse Button -->
            </div>
            <div class="timeline-badge info">
              <button type="button" class="btn btn-icon btn-round btn-info" id="mascotBtn"
                style="border:none; background-color: transparent;" onclick="launchDriver(navigation_steps)">
                <i class="fas fa-question"></i>
                <!--  <img src="assets/img/mascot.png" style="width:50px;" alt="Button Image"> -->
              </button>
            </div>
            <button id="topNavToggler" class="navbar-toggler" style="display:block;" type="button"
              onclick="toggleRows()">
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
        </nav>
        <!-- End Navbar -->
      </div>
      <script>
        let keywordMetrics = {};
        let keywordMapping = {};
        let rowsHidden = false; // Keep track of the state

        function launchDriver(steps) {
          const driverObj = driver({
            showProgress: false,
            steps: steps,
            onDestroyStarted: () => {
              removeMockData();
              driverObj.destroy();
            }
          });

          driverObj.drive();
        }

        function toggleRows() {
          const semRow = document.getElementById('semRow');
          const smmRow = document.getElementById('smmRow');
          const bdRow = document.getElementById('bdRow');

          if (rowsHidden) {
            // Show the rows
            semRow.style.display = "block";
            smmRow.style.display = "block";
            bdRow.style.display = "block";
            rowsHidden = false;
          } else {
            // Hide the rows
            semRow.style.display = "none";
            smmRow.style.display = "none";
            bdRow.style.display = "none";
            rowsHidden = true;
          }
        }


        document.addEventListener('DOMContentLoaded', function () {
          toggleRows();
          const textarea = document.getElementById('keyword_analysis_keywords');
          if (textarea) {
            textarea.addEventListener('input', updateKeywordCount);
            updateKeywordCount(); // Initial count
          } else {
            console.warn('Textarea with ID "keyword_analysis_keywords" not found.');
          }
        });

        function clearKeywordAnalysis() {

        }

        async function serpModal(keyword) {
          const country = document.getElementById('keywordAnalysisCountry').value;
          const language = document.getElementById('keywordAnalysisLanguage').value;
          user = "kenneth@mediaone.co";
          const response = await fetch('https://8k6r15rg4m.execute-api.ap-southeast-1.amazonaws.com/serpLite', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ keyword, language, location: country }),
          });
          const serpData = await response.json();

          console.log(serpData);
          document.getElementById('serpHeader').textContent = 'SERP for ' + keyword;

          if (!keywordMetrics[keyword]) {
            keywordMetrics[keyword] = {};
          }
          keywordMetrics[keyword]['serp'] = serpData.body;

          populateSerpTable(serpData.body);
        }

        function populateSerpTable(keywords) {
          const tableBody = document.querySelector("#serpTable tbody");

          //Clear existing table rows
          tableBody.innerHTML = "";

          const serpArray = Object.entries(keywords).map(([rank, data]) => ({
            rank: rank,
            url: data.url,
            title: data.title,
            description: data.description
          }));

          //Iterate through the keywords and create table rows
          serpArray.forEach(rank => {
            const row = tableBody.insertRow();
            const rankCell = row.insertCell();
            const urlCell = row.insertCell();
            const titleCell = row.insertCell();
            const descriptionCell = row.insertCell();

            rankCell.textContent = rank.rank;
            urlCell.textContent = rank.url;
            titleCell.textContent = rank.title;
            descriptionCell.textContent = rank.description;
          });

          makeTableSortable('serpTable');
          document.getElementById('serpCard').style.display = "block";
        }

        async function keywordAnalysis() {
          document.getElementById('keywordAnalysisUrlHelp').style.display = "none";
          document.getElementById('keywordAnalysisKeywordsHelp').style.display = "none";
          document.getElementById('keywordAnalysisUrlDiv').classList.remove('has-error', 'has-feedback');
          document.getElementById('keywordAnalysisKeywordsDiv').classList.remove('has-error', 'has-feedback');

          if (!document.getElementById('keyword_analysis_url').value && !document.getElementById('keyword_analysis_keywords').value) {
            document.getElementById('keywordAnalysisUrlHelp').style.display = "block";
            document.getElementById('keywordAnalysisUrlDiv').classList.add('has-error', 'has-feedback');
            document.getElementById('keywordAnalysisKeywordsHelp').style.display = "block";
            document.getElementById('keywordAnalysisKeywordsDiv').classList.add('has-error', 'has-feedback');
          } else {
            document.getElementById('keywordAnalysisSubmit').innerHTML = '<div class="custom-toggle rotate"><i class="icon-settings"></i></div>';
            document.querySelector("#serpTable tbody").innerHTML = "";

            const urlValue = document.getElementById('keyword_analysis_url').value;
            const keywordsValue = document.getElementById('keyword_analysis_keywords').value;
            const domain = document.getElementById('keyword_analysis_url').value;
            const location = document.getElementById('keywordAnalysisCountry').value;
            const language = document.getElementById('keywordAnalysisLanguage').value;
            const keywords = document.getElementById('keyword_analysis_keywords').value.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);

            const promises = [];

            if (urlValue && keywordsValue) {
              promises.push(getKeywordRankings());
            }

            if (urlValue) {
              promises.push(getRankingKeywords());
              promises.push(getWebpageKeywords());
            }

            if (keywordsValue) {
              promises.push(getSimilarKeywords());
            }

            try {
              await Promise.all(promises);

              // Run getTimeToRank concurrently for each keyword
              const timeToRankPromises = keywords.map(keyword => getTimeToRank(keyword, language, location, domain)); // Assuming language, location, urlValue are defined elsewhere.  Important: pass target URL here.
              await Promise.all(timeToRankPromises);

            } catch (error) {
              console.error("One or more keyword analysis tasks failed:", error);
            } finally {
            }
            document.getElementById('keywordAnalysisSubmit').innerHTML = 'Submit';
            console.log(keywordMetrics);
          }
        }

        async function getTimeToRank(keyword, language, location, target) {
          const resultsContainerId = `serp-results-container-${keyword.replace(/\s+/g, '-')}`;
          try {
            // Create a unique container for each keyword's results
            const resultsContainer = document.createElement('div');
            resultsContainer.id = resultsContainerId;
            // Optionally, add a heading or some initial content to the container
            resultsContainer.innerHTML = `<h4>SERP Results for: ${keyword}</h4>`;
            document.getElementById('serpTable').after(resultsContainer); // Append container to the result table


            const serpEndpoint = 'https://8k6r15rg4m.execute-api.ap-southeast-1.amazonaws.com/serpLite';
            const serpResponse = await fetch(serpEndpoint, {
              method: 'POST',
              headers: {
                'Content-Type': { merge: true, value: 'application/json' }
              },
              body: JSON.stringify({
                keyword: keyword,
                language: language,
                location: location
              })
            });

            if (!serpResponse.ok) {
              throw new Error(`SERP API Error: ${serpResponse.status} ${serpResponse.statusText}`);
            }

            const serpData = await serpResponse.json();
            console.log(`SERP API Response for ${keyword}:`, serpData);

            if (!keywordMetrics[keyword]) {
              keywordMetrics[keyword] = {};
            }
            keywordMetrics[keyword]['serp'] = serpData.body;

            if (!serpData || !serpData.body) {
              throw new Error(`Invalid SERP API response format for ${keyword}. Expected 'body' property.`);
            }

            const serp_dict = serpData.body;

            // Fetch domain metrics for SERP results and then display them
            const serpResultsWithMetrics = await Promise.all(
              Object.entries(serp_dict).map(async ([rank, result]) => {
                const domainMetrics = await getDomainMetrics(result.url, keyword);
                return {
                  rank: rank,
                  ...result,
                  ...domainMetrics?.body // Add domain metrics to the result object
                };
              })
            );


            // Ensure displaySerpResults receives the container ID
            //displaySerpResults(serpResultsWithMetrics, resultsContainerId);


            const keywordRecommendations = await getKeywordRecommendations(keyword, language, location, target, serp_dict)

            // Await the keyword recommendations
            const timeToRank = keywordRecommendations[0];

            if (!keywordMetrics[keyword]) {
              keywordMetrics[keyword] = {};
            }

            keywordMetrics[keyword]['timeToRank'] = timeToRank;
            keywordMetrics[keyword]['mapping'] = keywordRecommendations[1];

            if (!keywordMapping[keywordRecommendations[1]]) {
              keywordMapping[keywordRecommendations[1]] = [];
              keywordMapping[keywordRecommendations[1]].push(keyword);
            }

            console.log("Keyword Metrics after keywordAnalysis:", keywordMetrics);

            await displayOverallSummaryTable(location, language, target);

          } catch (error) {
            console.error(`An error occurred for ${keyword}:`, error);
            const container = document.getElementById(resultsContainerId);
            if (container) {
              container.innerHTML = `<p class="error">Error: ${error.message}</p>`;
            } else {
              console.warn(`Results container not found: ${resultsContainerId}`);
            }
          }
        }

        async function displayOverallSummaryTable(location, language, target) {
          keywordsInput = document.getElementById('keyword_analysis_keywords').value;
          keywords = keywordsInput.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);
          const summaryContainer = document.getElementById('overall-summary');
          if (!summaryContainer) {
            console.error("Summary container not found");
            return;
          }

          // Prepare the data for the summary table, using keywordMetrics
          summaryData = keywords.map((keyword, index) => {
            const metrics = keywordMetrics[keyword] || {
              cpc: 'N/A',
              search_volume: 'N/A',
              timeToRank: 'N/A',
              //mapping: '-'
            }; // Provide default values

            return {
              No: index + 1,
              keyword: keyword,
              search_volume: metrics.search_volume || 'N/A',
              cpc: metrics.cpc || 'N/A',
              timeToRank: metrics.timeToRank || 'N/A',
              reason: '', // Initialize the 'Reason' field
              //mapping: metrics.mapping || '',
            };
          });


          let tableHTML = `
              <div class="table-container">
                  <table>
                      <thead>
                          <tr>
                              <th>No.</th>
                              <th onclick="sortSummaryTable('keyword')">Keyword</th>
                              <th onclick="sortSummaryTable('search_volume')">Search Volume</th>
                              <th onclick="sortSummaryTable('cpc')">CPC</th>
                              <th onclick="sortSummaryTable('timeToRank')">Time to Rank</th>
                              <th>Reason</th>
                              
                          </tr>
                      </thead>
                      <tbody>
              `;

          for (let index = 0; index < summaryData.length; index++) {
            const item = summaryData[index];
            const timeToRankClass = getTimeToRankClass(item.timeToRank);

            // Fetch initial reason from API
            const reason = await fetchReasonFromAPI(item.keyword, location, language, target);
            summaryData[index].reason = reason; // Update summaryData with initial reason

            tableHTML += `
                <tr>
                  <td>${item.No}</td>
                  <td>${item.keyword}</td>
                  <td>${item.search_volume}</td>
                  <td>${item.cpc}</td>
                  <td class="${timeToRankClass}">${item.timeToRank}</td>
                  <td><textarea class="multiline-input" id="reason-${index}" onchange="updateReason(${index}, this.value)">${reason}</textarea></td>
                  </tr>
              `;
          }

          tableHTML += `
                    </tbody>
                </table>
            </div>
            `;

          //tableHTML += '<button id="downloadCsvBtn" onclick="downloadOverallSummaryTableAsCSV()">Download Keyword Summary as CSV</button><br><br>';

          summaryContainer.innerHTML = tableHTML

          document.getElementById('keywordsSummaryCard').style.display = 'block';
        }

        function getTimeToRankClass(timeToRank) {
          if (timeToRank === 'more than 12 months') {
            return 'time-to-rank-more-than-12';
          } else if (timeToRank === '9-12 months') {
            return 'time-to-rank-9-12';
          } else if (timeToRank === '6-9 months') {
            return 'time-to-rank-6-9';
          } else if (timeToRank === '3-6 months') {
            return 'time-to-rank-3-6';
          } else if (timeToRank === '0-3 months') {
            return 'time-to-rank-0-3';
          } else {
            return ''; // Default class or no class
          }
        }

        async function fetchReasonFromAPI(keyword, location, language, target) {
          const reasonApiEndpoint = "https://cdahvw5qi7.execute-api.ap-southeast-1.amazonaws.com/reasonForKwSelection";

          try {
            const response = await fetch(reasonApiEndpoint, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                location: location,
                language: language,
                target: target,
                keyword: keyword
              })
            });

            if (response.ok) {
              const data = await response.json();
              return data.body;
            } else {
              console.error("Error fetching reason from API:", response.status);
              return ''; // Return empty string in case of error
            }
          } catch (error) {
            console.error("Error fetching reason from API:", error);
            return ''; // Return empty string in case of error
          }
        }

        async function getRankForUrl(url, keyword, language, location) {
          try {
            const rankCheckerResponse = await fetch('https://v5bizygr4m.execute-api.ap-southeast-1.amazonaws.com/rankChecker', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                keyword: keyword,
                language: language,
                location: location,
                target: url // Set target to the current URL
              })
            });

            if (rankCheckerResponse.ok) {
              const rankCheckerData = await rankCheckerResponse.json();
              try {
                keywordMetrics[keyword]['rank'] = rankCheckerData;
              } catch (error) {
                keywordMetrics[keyword] = {};
                keywordMetrics[keyword]['rank'] = rankCheckerData;
              }
              return rankCheckerData; // Returns rank number.
            } else {
              console.error(`Rank Checker API error for ${url}:`, rankCheckerResponse.status);
              return 'N/A';
            }
          } catch (error) {
            console.error(`Error fetching rank for ${url}:`, error);
            return 'N/A';
          }
        }

        async function getKeywordRecommendations(keyword, language, location, target_url, serp_dict) { //keep target_url here.  It's being passed into this function, which is what we want.
          const keywordMappingEndpoint = 'https://c0bkxhc1s3.execute-api.ap-southeast-1.amazonaws.com/keywordMapping';
          const kwRecommendationsEndpoint = 'https://pkbguam62a.execute-api.ap-southeast-1.amazonaws.com/kwRecommendationsStructured';
          const recommendationsContainerId = `recommendations-container-${keyword.replace(/\s+/g, '-')}`;  // Unique container for recommendations
          const targetContentTableContainerId = `target-content-table-container-${keyword.replace(/\s+/g, '-')}`;

          try {
            // 1. Keyword Mapping API
            const keywordMappingResponse = await fetch(keywordMappingEndpoint, {
              method: 'POST',
              headers: {
                'Content-Type': { merge: true, value: 'application/json' }
              },
              body: JSON.stringify({
                location: location,
                keyword: keyword,
                language: language,
                target: target_url //use target_url instead of target.
              })
            });

            if (!keywordMappingResponse.ok) {
              throw new Error(`Keyword Mapping API Error for ${keyword}: ${keywordMappingResponse.status} ${keywordMappingResponse.statusText}`);
            }

            const keywordMappingData = await keywordMappingResponse.json();
            console.log(`Keyword Mapping API Response for ${keyword}:`, keywordMappingData);

            if (keywordMappingData && keywordMappingData.body && Array.isArray(keywordMappingData.body)) {
              const targetUrls = keywordMappingData.body;

              // 2. Get Domain Metrics for Target URLs & Rank Checking
              const targetDataPromises = targetUrls.map(async (url) => {
                const domainMetrics = await getDomainMetrics(url, keyword);

                return {
                  url: url,
                  ...domainMetrics?.body,
                  title: keywordMappingData.dict[url]?.title || 'N/A',
                  description: keywordMappingData.dict[url]?.description || 'N/A'
                };
              });

              const targetData = await Promise.all(targetDataPromises);

              console.log(`Target Content with Metrics and Rank for ${keyword}:`, targetData);

              if (!keywordMetrics[keyword]) {
                keywordMetrics[keyword] = {};
              }
              keywordMetrics[keyword]['ranked'] = targetData;


              //Get the rank from the targetData table
              const targetDataWithRank = await Promise.all(
                targetData.map(async (item) => {
                  const rankData = await getRankForUrl(item.url, keyword, language, location);
                  return {
                    ...item,
                    rank: rankData
                  };
                })
              );

              // 3. Call Keyword Recommendations API
              if (serp_dict) {
                const kwRecommendationsResponse = await fetch(kwRecommendationsEndpoint, {
                  method: 'POST',
                  headers: {
                    'Content-Type': { merge: true, value: 'application/json' }
                  },
                  body: JSON.stringify({
                    keyword: keyword,
                    target_content: targetDataWithRank.map(item => ({ url: item.url, domain_metrics: item, rank: item.rank })), // Pass all data as domain_metrics
                    serps_dict: serp_dict
                  })
                });

                if (!kwRecommendationsResponse.ok) {
                  throw new Error(`Keyword Recommendations API Error for ${keyword}: ${kwRecommendationsResponse.status} ${kwRecommendationsResponse.statusText}`);
                }

                const kwRecommendationsData = await kwRecommendationsResponse.json();
                console.log(`Keyword Recommendations API Response for ${keyword}:`, kwRecommendationsData);

                if (!keywordMetrics[keyword]) {
                  keywordMetrics[keyword] = {};
                }
                keywordMetrics[keyword]['recommendations'] = kwRecommendationsData.body;


                //Modified here to pass the recommendation container ID
                //displayKeywordRecommendations(kwRecommendationsData.body, recommendationsContainerId);

                // Extract URL
                let mapped_url = null;

                // Make sure the recommendation data is not null
                if (kwRecommendationsData.body) {
                  try {
                    const urlMatch = kwRecommendationsData.body.match(/(https?:\/\/|www\.)([a-zA-Z0-9.-]+(\.[a-zA-Z]{2,})+[a-zA-Z0-9_/\-\?=\&%\#\.]*)/gi);
                    if (urlMatch && urlMatch.length > 0) {
                      mapped_url = urlMatch[0];
                    } else {
                      console.warn(`No URL found in recommendations for ${keyword}`);
                      mapped_url = 'N/A'; // Set to N/A if no URL is found
                    }
                  } catch (urlExtractionError) {
                    console.error(`Error extracting URL from recommendations for ${keyword}:`, urlExtractionError);
                    mapped_url = 'N/A';  // Set to N/A in case of an error during extraction
                  }
                } else {
                  console.warn(`Empty keyword recommendations for ${keyword}`);
                  mapped_url = 'N/A';  // Set to N/A if the recommendations are empty
                }


                // Extract Time to Rank using regex
                const timeToRankMatch = kwRecommendationsData.body.match(/(0-3 months|3-6 months|6-9 months|9-12 months|more than 12 months|More than 12 months)/);
                const timeToRank = timeToRankMatch ? timeToRankMatch[0] : 'N/A';
                return [timeToRank, mapped_url];
              } else {
                console.warn(`Skipping Keyword Recommendations for ${keyword} due to missing serp_dict.`);
                return ['N/A', 'N/A'];
              }
            } else {
              console.warn(`Invalid Keyword Mapping API response format for ${keyword}. Expected 'body' as array.`);
              return ['N/A', 'N/A'];
            }

          } catch (error) {
            console.error(`Error during Keyword Mapping, Target Content Processing, or Keyword Recommendations for ${keyword}:`, error);
            return ['N/A', 'N/A'];
          }
        }

        async function getDomainMetrics(url, keyword) {
          const domainMetricsEndpoint = 'https://5zdbpwaia5.execute-api.ap-southeast-1.amazonaws.com/pageDomainMetrics';

          try {
            const response = await fetch(domainMetricsEndpoint, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                url: url,
                keyword: keyword
              })
            });

            if (!response.ok) {
              console.warn(`Domain Metrics API Error for URL ${url}: ${response.status} ${response.statusText}`);
              return null;
            }

            const data = await response.json();
            return data;
          } catch (error) {
            console.error(`Error fetching domain metrics for URL ${url}:`, error);
            return null;
          }
        }

        async function getKeywordRankings() {
          const country = document.getElementById('keywordAnalysisCountry').value;
          const language = document.getElementById('keywordAnalysisLanguage').value;
          const keywords = document.getElementById('keyword_analysis_keywords').value.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);
          const domain = document.getElementById('keyword_analysis_url').value;
          const table = document.getElementById('queriedKeywordsTable').getElementsByTagName('tbody')[0];
          table.innerHTML = ''; // Clear existing table data

          let rowNumber = 1; // Initialize the row number counter

          for (const keyword of keywords) { //Iterate keywords sequentially
            const data = await fetchRank(domain, country, language, keyword); //Fetch rank for each keyword

            if (data && Object.keys(data).length > 0) {
              for (const rank in data) {
                if (data.hasOwnProperty(rank)) {
                  const url = data[rank].url;
                  const newRow = table.insertRow();
                  const cell1 = newRow.insertCell(0);
                  const cell2 = newRow.insertCell(1);
                  const cell3 = newRow.insertCell(2);
                  const cell4 = newRow.insertCell(3);

                  cell1.innerHTML = rowNumber;
                  cell2.innerHTML = keyword;
                  cell3.innerHTML = rank;
                  cell4.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
                }
              }
              rowNumber++; // Increment the row number after displaying all entries for a keyword
            } else {
              // Handle case where no results are found for a keyword
              const newRow = table.insertRow();
              const cell1 = newRow.insertCell(0);
              const cell2 = newRow.insertCell(1);
              const cell3 = newRow.insertCell(2);
              const cell4 = newRow.insertCell(3);

              cell1.innerHTML = rowNumber;
              cell2.innerHTML = keyword;
              cell3.innerHTML = 'Not Found';
              cell4.innerHTML = 'Not Found';
              rowNumber++; // Increment the row number even when no results are found
            }
          }
          document.getElementById('queriedKeywordsCard').style.display = "block";
        }

        async function getSimilarKeywords() {
          const country = document.getElementById('keywordAnalysisCountry').value;
          const language = document.getElementById('keywordAnalysisLanguage').value;
          const keywords = document.getElementById('keyword_analysis_keywords').value.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);


          var url = "https://lgvdhcs4t2.execute-api.ap-southeast-1.amazonaws.com/similarKeywords";
          var queryString = {
            "keywords": keywords,
            "location": country,
            "language": language
            ,//"user": JSON.parse(localStorage.getItem('googleUser')).email
          };

          var headers = {
            "Content-Type": "application/json",
          };

          try {
            const response = await fetch(url, {
              method: 'POST',
              headers: headers,
              body: JSON.stringify(queryString)
            });

            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            const data = await response.json();
            populateSimilarKeywordsTable(data.body);
          } catch (error) {
            console.error("Error fetching data:", error);
            // Re-throw the error to signal failure to the caller (keywordAnalysis)
            throw error;
          }
        }

        async function getRankingKeywords() {
          const domain = document.getElementById('keyword_analysis_url').value;
          const country = document.getElementById('keywordAnalysisCountry').value;
          let targetDomain = domain;

          if (document.getElementById('keywordAnalysisTypeDomain').checked) {
            if (targetDomain.includes('http')) {
              targetDomain = (targetDomain.replace('http://', '').replace('https://', '')).split('/')[0];
            }
          } else {
            if (!targetDomain.includes('http')) {
              targetDomain = 'https://' + targetDomain;
            }
          }

          const url = "https://0dqny7l5y9.execute-api.ap-southeast-1.amazonaws.com/rankingKeywords";

          const headers = {
            "Content-Type": "application/json",
          };

          const queryString = {
            "target": targetDomain,
            "location": country
          };

          try {
            const response = await fetch(url, {
              method: 'POST',
              headers: headers,
              body: JSON.stringify(queryString)
            });

            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            const data = await response.json();
            populateRankingKeywordsTable(data.body);
            addTableEventListeners();
          } catch (error) {
            console.error("Error fetching data:", error);
            // Re-throw the error to signal failure to the caller (keywordAnalysis)
            throw error;
          }
        }

        async function getWebpageKeywords() {
          const domain = document.getElementById('keyword_analysis_url').value;
          const country = document.getElementById('keywordAnalysisCountry').value;
          const language = document.getElementById('keywordAnalysisLanguage').value;

          const endpoint = "https://ei6xj9x2rd.execute-api.ap-southeast-1.amazonaws.com/keywordsForSite";
          try {
            const response = await fetch(endpoint, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                location: country,
                language: language,
                target: domain
              })
            });

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            if (typeof data !== 'object' || data === null) {
              console.error("Data is not an object:", data);
              return; // Exit function if data is not an object.
            }
            const allKeywords = Object.entries(data).map(([keyword, values]) => ({
              keyword,
              search_volume: values.search_volume,
              competition: values.competition,
              search_intent: values.search_intent,
              reason_for_choosing: values.reason_for_choosing
            }));

            populateWebpageKeywordsTable(allKeywords);
          } catch (error) {
            console.error("Error fetching data:", error);
            // Re-throw the error to signal failure to the caller (keywordAnalysis)
            throw error;
          }
        }

        function populateWebpageKeywordsTable(keywords) {
          const tableBody = document.querySelector("#webpageKeywordsTable tbody");

          //Clear existing table rows
          tableBody.innerHTML = "";

          //Iterate through the keywords and create table rows
          keywords.forEach(keyword => {
            const row = tableBody.insertRow();
            const keywordCell = row.insertCell();
            const searchVolCell = row.insertCell();
            const competitionCell = row.insertCell();
            const searchIntentCell = row.insertCell();
            const reasonCell = row.insertCell();
            const addCell = row.insertCell();

            keywordCell.textContent = keyword.keyword;
            searchVolCell.textContent = keyword.search_volume;
            competitionCell.textContent = keyword.competition;
            searchIntentCell.textContent = keyword.search_intent;
            reasonCell.textContent = keyword.reason_for_choosing;

            // Create the + icon with a class for styling and a click handler
            const plusIcon = document.createElement("i");
            plusIcon.classList.add("fas", "fa-plus-circle", "clickable-plus");
            plusIcon.addEventListener("click", () => {
              addKeywordToTextarea(keyword.keyword);
              addCell.textContent = "added";
            });
            addCell.appendChild(plusIcon);
          });
          makeTableSortable('webpageKeywordsTable');
        }

        function populateSimilarKeywordsTable(keywords) {
          const tableBody = document.querySelector("#similarKeywordsTable tbody");

          //Clear existing table rows
          tableBody.innerHTML = "";

          const similarKeywordsArray = Object.entries(keywords).map(([keyword, data]) => ({
            keyword: keyword,
            search_volume: data.search_volume,
            cpc: data.cpc,
            competition: data.competition
          }));

          //Iterate through the keywords and create table rows
          similarKeywordsArray.forEach(keyword => {
            const row = tableBody.insertRow();
            const keywordCell = row.insertCell();
            const searchVolCell = row.insertCell();
            const competitionCell = row.insertCell();
            const cpcCell = row.insertCell();
            const addCell = row.insertCell();

            keywordCell.textContent = keyword.keyword;
            searchVolCell.textContent = keyword.search_volume;
            competitionCell.textContent = keyword.competition;
            cpcCell.textContent = keyword.cpc;


            if (!keywordMetrics[keyword.keyword]) {
              keywordMetrics[keyword.keyword] = {};
            }

            keywordMetrics[keyword.keyword]['search_volume'] = keyword.search_volume;
            keywordMetrics[keyword.keyword]['competition'] = keyword.competition;
            keywordMetrics[keyword.keyword]['cpc'] = keyword.cpc;

            // Create the + icon with a class for styling and a click handler
            const plusIcon = document.createElement("i");
            plusIcon.classList.add("fas", "fa-plus-circle", "clickable-plus");
            plusIcon.addEventListener("click", () => {
              addKeywordToTextarea(keyword.keyword);
              addCell.textContent = "added";
            });
            addCell.appendChild(plusIcon);
          });
          makeTableSortable('similarKeywordsTable');
        }

        function populateRankingKeywordsTable(keywords) {
          const tableBody = document.querySelector("#rankingKeywordsTable tbody");

          //Clear existing table rows
          tableBody.innerHTML = "";

          const rankedKeywordsArray = Object.entries(keywords).map(([keyword, data]) => ({
            keyword: keyword,
            search_volume: data.search_volume,
            rank: data.rank,
            difficulty: data.difficulty,
            cpc: data.cpc
          }));

          //Iterate through the keywords and create table rows
          rankedKeywordsArray.forEach(keyword => {
            const row = tableBody.insertRow();
            const keywordCell = row.insertCell();
            const searchVolCell = row.insertCell();
            const rankCell = row.insertCell();
            const cpcCell = row.insertCell();
            const addCell = row.insertCell();

            keywordCell.textContent = keyword.keyword;
            searchVolCell.textContent = keyword.search_volume;
            rankCell.textContent = keyword.rank;
            cpcCell.textContent = keyword.cpc;

            if (!keywordMetrics[keyword]) {
              keywordMetrics[keyword] = {}
            }

            keywordMetrics[keyword]['search_volume'] = keyword.search_volume;
            keywordMetrics[keyword]['competition'] = keyword.competition;
            keywordMetrics[keyword]['cpc'] = keyword.cpc;
            keywordMetrics[keyword]['rank'] = keyword.rank;

            // Create the + icon with a class for styling and a click handler
            const plusIcon = document.createElement("i");
            plusIcon.classList.add("fas", "fa-plus-circle", "clickable-plus");
            plusIcon.addEventListener("click", () => {
              addKeywordToTextarea(keyword.keyword);
              addCell.textContent = "added";
            });
            addCell.appendChild(plusIcon);
          });
          makeTableSortable('rankingKeywordsTable');
          document.getElementById('combinedCards').style.display = "block";
          document.getElementById('serpCard').style.display
        }



        function addKeywordToTextarea(keyword) {
          const textarea = document.getElementById('keyword_analysis_keywords');
          const existingKeywords = textarea.value.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);

          if (!existingKeywords.includes(keyword)) {
            if (existingKeywords.length > 0) {
              textarea.value += "\n";
            }
            textarea.value += keyword + "\n";
            updateKeywordCount();
          } else {
            console.log(`Keyword "${keyword}" already exists in textarea. Skipping.`);
          }
        }

        function updateKeywordCount() {
          const textarea = document.getElementById('keyword_analysis_keywords');
          const keywords = textarea.value.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);
          const keywordCount = keywords.length;
          const countDisplayElement = document.getElementById('keywordCountDisplay');

          if (keywordCount == 0) {
            countDisplayElement.textContent = 'Keywords';
          } else {
            countDisplayElement.textContent = `Keyword Count: ${keywordCount}`;
          }
        }

        function sortTable(tableId, columnIndex, isNumeric = false) {
          const table = document.getElementById(tableId);
          const tbody = table.querySelector('tbody');
          const rows = Array.from(tbody.querySelectorAll('tr'));

          // Get the current sort direction from the table's dataset
          const currentSortDirection = table.dataset.sortDirection === 'asc' ? 'asc' : 'desc';

          const comparer = (row1, row2) => {
            const cell1 = row1.querySelectorAll('td')[columnIndex].textContent.trim();
            const cell2 = row2.querySelectorAll('td')[columnIndex].textContent.trim();

            let comparison = 0; // Default comparison value

            if (isNumeric) {
              const num1 = parseFloat(cell1);
              const num2 = parseFloat(cell2);

              if (isNaN(num1) && isNaN(num2)) comparison = 0;
              else if (isNaN(num1)) comparison = 1;
              else if (isNaN(num2)) comparison = -1;
              else comparison = num1 - num2;
            } else {
              comparison = cell1.localeCompare(cell2);
            }

            // Reverse the comparison based on the current sort direction
            return currentSortDirection === 'asc' ? comparison : -comparison;
          };

          rows.sort(comparer);

          // Remove existing rows from the table
          while (tbody.firstChild) {
            tbody.removeChild(tbody.firstChild);
          }

          // Append sorted rows to the table
          rows.forEach(row => tbody.appendChild(row));

          // Update the sort direction for the next click
          table.dataset.sortDirection = currentSortDirection === 'asc' ? 'desc' : 'asc';
        }


        function makeTableSortable(tableId) {
          const table = document.getElementById(tableId);
          const thead = table.querySelector('thead');
          const headers = thead.querySelectorAll('th');

          headers.forEach((header, columnIndex) => {
            const isNumericColumn = (header.textContent.toLowerCase().includes("search vol") || header.textContent.toLowerCase().includes("cpc") || header.textContent.toLowerCase().includes("rank"));

            header.addEventListener('click', () => {
              sortTable(tableId, columnIndex, isNumericColumn);
            });
            header.style.cursor = 'pointer';
          });

          // Initialize sort direction for the table (ascending by default)
          table.dataset.sortDirection = 'asc';
        }

        function attachKeywordTableListeners(tableId) {
          const table = document.getElementById(tableId);
          if (!table) {
            console.warn(`Table with ID "${tableId}" not found.`);
            return;
          }

          const tableBody = table.querySelector('tbody');
          if (!tableBody) {
            console.warn(`Table with ID "${tableId}" has no tbody.`);
            return;
          }

          tableBody.addEventListener('click', function (event) {
            // Find the closest row element (<tr>) to the clicked element
            const targetRow = event.target.closest('tr');

            if (targetRow) {
              // Get the keyword from the first cell (<td>) of the row
              const keywordCell = targetRow.querySelector('td:first-child');

              if (keywordCell) {
                const keyword = keywordCell.textContent;
                console.log(`Clicked keyword: ${keyword}`); // For debugging
                showSerps(keyword); // Call your showSerps function
              }
            }
          });
        }

        function addTableEventListeners() {
          const rakedKeywordsTable = document.getElementById('rankingKeywordsTable');
          const similarKeywordsTable = document.getElementById('similarKeywordsTable');
          const webpageKeywordsTable = document.getElementById('webpageKeywordsTable');

          if (rakedKeywordsTable) {
            rakedKeywordsTable.addEventListener('click', function (event) {
              if (event.target.tagName === 'TD') {
                const keyword = event.target.parentElement.cells[0].textContent;
                serpModal(keyword);
              }
            });
          }

          if (similarKeywordsTable) {
            similarKeywordsTable.addEventListener('click', function (event) {
              if (event.target.tagName === 'TD') {
                const keyword = event.target.parentElement.cells[0].textContent;
                serpModal(keyword);
              }
            });
          }

          if (webpageKeywordsTable) {
            webpageKeywordsTable.addEventListener('click', function (event) {
              if (event.target.tagName === 'TD') {
                const keyword = event.target.parentElement.cells[0].textContent;
                serpModal(keyword);
              }
            });
          }
        }

        async function mapKeywords() {
          if (!document.getElementById('keyword_analysis_keywords').value || !document.getElementById('keyword_analysis_url').value) {
            document.getElementById('keywordAnalysisUrlHelp').style.display = "block";
            document.getElementById('keywordAnalysisUrlDiv').classList.add('has-error', 'has-feedback');
            document.getElementById('keywordAnalysisKeywordsHelp').style.display = "block";
            document.getElementById('keywordAnalysisKeywordsDiv').classList.add('has-error', 'has-feedback');
            return
          }

          document.getElementById('keywordMappingCard').style.display = "none";
          document.getElementById('mapKeywordsBtn').innerHTML = '<div class="custom-toggle rotate"><i class="icon-settings"></i></div>';
          const promises = [];

          promises.push(getKeywordRankings());
          await Promise.all(promises);

          const domain = document.getElementById('keyword_analysis_url').value;
          const country = document.getElementById('keywordAnalysisCountry').value;
          const language = document.getElementById('keywordAnalysisLanguage').value;
          const keywords = document.getElementById('keyword_analysis_keywords').value.split(/[\n,]+/).map(k => k.trim()).filter(Boolean);

          clearAllLists();
          listCounter = 1;

          // Create an array to hold the promises for each fetch request
          const fetchPromises = keywords.map(keyword => {

            for (key in keywordMapping) {
              value = keywordMapping[key];
              if (value.includes(keyword)) {
                console.log(keywordMapping);

              } else {
                return fetch('https://6s7ijwwsa8.execute-api.ap-southeast-1.amazonaws.com/dragDrop', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({
                    domain: domain,
                    keyword: keyword,
                    language: language,
                    location: country,
                  })
                }).then(response => {
                  if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                  }
                  return response.json();
                }).then(data => {
                  data = data.replace(domain, '').replace('http://', '').replace('www.', '').replace('https://', '');
                  if (data) {
                    if (!keywordMapping[data]) {
                      keywordMapping[data] = [];
                    }
                    keywordMapping[data].push(keyword);
                  } else {
                    console.warn(`API response missing URL for keyword: ${keyword}`);
                  }
                })
                  .catch(error => {
                    console.error(`Error for keyword "${keyword}":`, error);
                  });
              }
            }
          }
          );

          try {
            // Wait for all promises to resolve before populating the lists
            await Promise.all(fetchPromises);

            // Now populate the lists based on the built-up keywordMapping
            populateListsFromMapping();
          } catch (error) {
            console.error("An error occurred during the fetch requests:", error);
          } finally {
            document.getElementById('mapKeywordsBtn').innerHTML = 'Map Keywords';
            document.getElementById('keywordMappingCard').style.display = "block";
          }
        }

        function populateListsFromMapping() {
          for (const url in keywordMapping) {
            if (keywordMapping.hasOwnProperty(url)) {
              const { listContainer, list, renameInput } = createListContainer(url);

              keywordMapping[url].forEach(keyword => {
                const listItem = createKeywordListItem(keyword);
                list.appendChild(listItem);
              });

              listsContainer.appendChild(listContainer);
              listCounter++;
            }
          }
        }

        function createKeywordListItem(keyword) {
          const listItem = document.createElement('li');
          listItem.draggable = true;
          listItem.addEventListener('dragstart', drag);
          listItem.id = keyword;
          listItem.textContent = keyword; // Display keyword
          return listItem;
        }

        function createListContainer(url) {
          const listContainer = document.createElement('div');
          listContainer.classList.add('list-container');

          const renameInput = document.createElement('input');
          renameInput.type = 'text';
          renameInput.classList.add('border', 'rounded', 'p-2', 'flex-grow-1', 'me-2');
          renameInput.value = url;

          const deleteButton = document.createElement('button');
          deleteButton.classList.add('btn', 'btn-sm', 'btn-outline-danger');
          deleteButton.innerHTML = '<i class="fas fa-times"</i>';
          deleteButton.addEventListener('click', function () {
            deleteList(this);
          });


          const listId = 'list' + listCounter;
          const list = document.createElement('ul');
          list.id = listId;
          list.classList.add('keyword-list');
          list.addEventListener('drop', drop);
          list.addEventListener('dragover', allowDrop);

          listContainer.appendChild(renameInput);
          listContainer.appendChild(deleteButton);
          listContainer.appendChild(list);

          // Add the "Page Recommendations" button
          const recommendationsButton = document.createElement('button');
          recommendationsButton.classList.add("btn", "btn-primary", "w-100");
          recommendationsButton.style.display = "block";
          domain = document.getElementById('keyword_analysis_url').value;
          recommendationsButton.innerHTML += '<i class="fas fa-magic me-1"></i> ';
          recommendationsButton.textContent = 'Page Recommendations';
          recommendationsButton.addEventListener('click', function () {
            // Disable the button
            this.disabled = true;
            this.classList.add('disabled');

            // Get the URL from the input field *inside* this function
            const currentURL = renameInput.value;

            console.log(currentURL);

            // Get the list items and put them into an array
            const listItems = Array.from(list.children).map(item => item.textContent.trim());

            getPageRecommendations(currentURL, listItems, this); // Pass the button element
          });
          listContainer.appendChild(recommendationsButton);
          return { listContainer, list, renameInput };
        }

        async function getPageRecommendations(url, listElement, button) {
          button.innerHTML = '<div class="custom-toggle rotate"><i class="icon-settings"></i></div>';
          const recommendationEndpoint = 'https://pkkz2e02ch.execute-api.ap-southeast-1.amazonaws.com/onPageContentRecommendations';

          try {
            const recommendationResponse = await fetch(recommendationEndpoint, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                url,
                "keywords": listElement
              })
            });

            recommendationData = await recommendationResponse.json();

            // Create collapsible structure
            const collapsibleButton = document.createElement('button');
            collapsibleButton.classList.add('collapsible50');
            collapsibleButton.textContent = `${url}`;

            const contentDiv = document.createElement('div');
            contentDiv.classList.add('content');

            // Check if the response is a list of dictionaries
            if (Array.isArray(recommendationData) && recommendationData.length > 0 && typeof recommendationData[0] === 'object') {
              // Create a table
              const table = document.createElement('table');
              table.classList.add("table", "table-striped", "mt-3");

              // Create table header
              const thead = document.createElement('thead');
              const headerRow = document.createElement('tr');
              const headers = Object.keys(recommendationData[0]);

              headers.forEach(headerText => {
                const th = document.createElement('th');
                th.textContent = headerText;
                th.style.border = '1px solid #ddd';
                th.style.padding = '8px';
                th.style.textAlign = 'left';
                headerRow.appendChild(th);
              });
              thead.appendChild(headerRow);
              table.appendChild(thead);


              // Create table body
              const tbody = document.createElement('tbody');
              recommendationData.forEach(item => {
                const row = document.createElement('tr');
                headers.forEach(header => {
                  const cell = document.createElement('td');
                  cell.textContent = item[header];
                  cell.style.border = '1px solid #ddd';
                  cell.style.padding = '8px';
                  row.appendChild(cell);
                });
                tbody.appendChild(row);
              });
              table.appendChild(tbody);

              contentDiv.innerHTML += '<h3>Content Optimisation</h3>';

              contentDiv.appendChild(table); // Append the table to the content div

              endpoint = 'https://udjdc333m9.execute-api.ap-southeast-1.amazonaws.com/getImages';

              response = await fetch(endpoint, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                  url: url,
                  keywords: listElement // Send keywords to the backend
                })
              });

              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }

              data = await response.json();

              console.log(data);

              const recommendationEndpoint = 'https://vwmqqj251d.execute-api.ap-southeast-1.amazonaws.com/onPageRecommendations';

              const recommendationResponse = await fetch(recommendationEndpoint, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                  "data": data,
                  "keywords": listElement
                })
              });

              if (!recommendationResponse.ok) {
                throw new Error(`HTTP error! status: ${recommendationResponse.status}`);
              }

              recommendationData = await recommendationResponse.json();

              data = recommendationData;
              let resultsHTML = '';

              let metaTableHTML = `<h3>Meta and Headings</h3>
        <table id="metaTable" class="table table-striped mt-3">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Current Value</th>
                    <th>Suggested Change</th>
                    <th>Rationale</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Meta Title</td>
                    <td>${data.meta_title.current_value}</td>
                    <td><textarea class="form-control">${data.meta_title.suggested_value}</textarea></td>
                    <td>${data.meta_title.rationale}</td>
                </tr>
                <tr>
                    <td>Meta Description</td>
                    <td>${data.meta_description.current_value}</td>
                    <td><textarea class="form-control">${data.meta_description.suggested_value}</textarea></td>
                    <td>${data.meta_description.rationale}</td>
                </tr>
                <tr>
                    <td>Canonical URL</td>
                    <td>${data.canonical_url.current_value}</td>
                    <td><textarea class="form-control">${data.canonical_url.suggested_value}</textarea></td>
                    <td>${data.canonical_url.rationale}</td>
                </tr>`;

              // Function to add heading rows
              function addHeadingRows(headingType, headings) {
                headings.forEach(heading => {
                  metaTableHTML += `
                <tr>
                    <td>${headingType}</td>
                    <td>${heading.current_value}</td>
                    <td><textarea class="form-control">${heading.suggested_value}</textarea></td>
                    <td>${heading.rationale}</td>
                </tr>
            `;
                });
              }

              addHeadingRows("H1 Heading", data.headings.h1);
              addHeadingRows("H2 Heading", data.headings.h2);
              addHeadingRows("H3 Heading", data.headings.h3);
              addHeadingRows("H4 Heading", data.headings.h4);

              metaTableHTML += `

            </tbody>
        </table>
    `;

              let imageTableHTML = `<h3>Image Title and Alt Text</h3>
            <table id="imageTable" class="table table-striped mt-3">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Image URL</th>
                        <th>Image Preview</th>
                        <th>Alt Text</th>
                        <th>Suggested Alt Text</th>
                        <th>Rationale</th>
                    </tr>
                </thead>
                <tbody>
        `;

              let i = 0;
              for (const imageData of data.image_data) {
                const imageUrl = Object.keys(imageData)[0];
                const imageDetails = imageData[imageUrl];

                imageTableHTML += `
                <tr>
                    <td>${i + 1}</td>
                    <td><a href="${imageUrl}" target="_blank">${imageUrl}</a></td>
                    <td><img style="width:200px;" src="${imageUrl}" alt="${imageDetails.current_value}"></td>
                    <td>${imageDetails.current_value}</td>
                    <td><textarea class="form-control">${imageDetails.suggested_value}</textarea></td>
                    <td>${imageDetails.rationale}</td>
                </tr>
            `;
                i++;
              }


              imageTableHTML += `
                </tbody>
            </table>
        `;

              resultsHTML += metaTableHTML;

              // Add export button after image table
              resultsHTML += '<button class="btn btn-black" onclick="exportOnPageToCSV()">Export to CSV</button>';

              contentDiv.innerHTML += resultsHTML;
              contentDiv.innerHTML += imageTableHTML;

            } else {
              // If it's not a list of dictionaries, just set the innerHTML
              contentDiv.innerHTML = recommendationData;
            }


            // Append elements to the recommendations div
            const recommendationsDiv = document.getElementById('onPageRecommendations');
            recommendationsDiv.appendChild(collapsibleButton);
            recommendationsDiv.appendChild(contentDiv);

            // Add event listener for collapsible functionality
            collapsibleButton.addEventListener('click', function () {
              this.classList.toggle('active');
              const content = this.nextElementSibling;
              if (content.style.display === 'block') {
                content.style.display = 'none';
              } else {
                content.style.display = 'block';
              }
            });

            console.log(recommendationData); // Now logs the parsed JSON data

          } catch (error) {
            console.error("Error fetching recommendations:", error);
          } finally {
            // Re-enable the button in the finally block to ensure it always happens
            button.disabled = false;
            button.classList.remove('disabled');
            button.innerHTML = "Page Recommendations";
          }
        }

        function exportOnPageToCSV() {
          // Collect data from both tables
          const metaTable = document.getElementById('metaTable');
          const imageTable = document.getElementById('imageTable');
          const contentTable = document.getElementById('contentTable');


          if (!metaTable || !imageTable) {
            alert('Tables not found. Please extract data first.');
            return;
          }

          const metaData = tableToCSV(metaTable);
          const imageData = tableToCSV(imageTable);
          const contentData = tableToCSV(contentTable);

          // Combine the data with a separator
          const csvData = "Meta Table Data:\n" + metaData + "\n\nImage Table Data:\n" + imageData + "\n\nContent Recommendations:\n" + contentData;

          // Create a download link
          const filename = 'on_page_recommendations.csv';
          const csvFile = new Blob([csvData], {
            type: 'text/csv'
          });
          const downloadLink = document.createElement('a');
          downloadLink.download = filename;
          downloadLink.href = window.URL.createObjectURL(csvFile);
          downloadLink.style.display = 'none';
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
        }

        function allowDrop(ev) {
          ev.preventDefault();
          const target = ev.target;

          if (target.classList.contains('keyword-list')) {
            // Check if the list is full
            if (target.children.length < MAX_ITEMS_PER_LIST) {
              target.classList.add('drag-over');
            } else {
              // Optional: Provide visual feedback that the list is full
              target.classList.add('list-full'); // Add a class for styling, e.g., red border
            }
          }
        }

        function clearAllLists() {
          while (listsContainer.firstChild) {
            listsContainer.removeChild(listsContainer.firstChild);
          }
        }

        function drop(ev) {
          ev.preventDefault();
          const target = ev.target;

          if (target.classList.contains('keyword-list')) {
            target.classList.remove('drag-over'); // Always remove the drag-over class

            // Check if the list is full again before dropping (safety check)
            if (target.children.length < MAX_ITEMS_PER_LIST) {
              var data = ev.dataTransfer.getData("text");
              var draggedElement = document.getElementById(data);
              target.appendChild(draggedElement);

              // Increase the height of the list
              const currentHeight = parseInt(window.getComputedStyle(target).minHeight);
              const numberOfKeywords = target.children.length;
              const heightIncrease = (numberOfKeywords * HEIGHT_PER_KEYWORD);
              target.style.minHeight = (currentHeight + heightIncrease) + 'px';

              target.classList.remove('list-full'); // remove the list-full class if there are items to drop
            } else {
              //Optional: Prevent the drop from occurring
              //You can optionally add additional error handling here
              target.classList.remove('list-full');
              return;
            }

          } else {
            target.classList.remove('drag-over');
            target.classList.remove('list-full'); //also, prevent adding css if element does not have the correct class
          }
        }

        function drag(ev) {
          ev.dataTransfer.setData("text", ev.target.id);
        }

        const MAX_ITEMS_PER_LIST = 20; // Set the maximum limit
        const HEIGHT_PER_KEYWORD = 6; // Additional increase per keyword.

        function deleteList(deleteButton) {
          const listContainer = deleteButton.parentNode;
          const listsContainer = document.getElementById('listsContainer');

          // Store the deleted list details for undo
          deletedLists.push({
            element: listContainer,
            nextSibling: listContainer.nextSibling,
            listsContainer: listsContainer
          });

          listsContainer.removeChild(listContainer);
        }

        function addNewList() {
          const listsContainer = document.getElementById('listsContainer');

          const listContainer = document.createElement('div');
          listContainer.classList.add('list-container');

          const listId = 'list' + listCounter;
          const defaultName = '/url-' + listCounter;

          const renameInput = document.createElement('input');
          renameInput.type = 'text';
          renameInput.classList.add('border', 'rounded', 'p-2', 'flex-grow-1', 'me-2');
          renameInput.value = defaultName;

          const deleteButton = document.createElement('button');
          deleteButton.classList.add('btn', 'btn-sm', 'btn-outline-danger');
          deleteButton.innerHTML = '<i class="fas fa-times"</i>';
          deleteButton.addEventListener('click', function () {
            deleteList(this);
          });

          const list = document.createElement('ul');
          list.id = listId;
          list.classList.add('keyword-list');
          list.addEventListener('drop', drop);
          list.addEventListener('dragover', allowDrop);

          listContainer.appendChild(renameInput);
          listContainer.appendChild(deleteButton);
          listContainer.appendChild(list);

          // Add the "Page Recommendations" button
          const recommendationsButton = document.createElement('button');
          recommendationsButton.classList.add("btn", "btn-primary", "w-100");
          recommendationsButton.style.display = "block";
          recommendationsButton.innerHTML += '<i class="fas fa-magic me-1"></i> ';
          recommendationsButton.textContent = 'Page Recommendations';
          recommendationsButton.addEventListener('click', function () {
            // Disable the button
            this.disabled = true;
            this.classList.add('disabled');

            const url = renameInput.value; //get the url value

            // Get the list items and put them into an array
            const listItems = Array.from(list.children).map(item => item.textContent.trim());

            console.log(listItems);

            getPageRecommendations(url, listItems, this); // Pass both URL and the array of list items and the button element
          });
          listContainer.appendChild(recommendationsButton);

          listsContainer.appendChild(listContainer);

          listCounter++;
        }

        let listCounter = 1;
        let deletedLists = []; // Store an array of deleted lists for multiple undo

        function deleteList(deleteButton) {
          const listContainer = deleteButton.parentNode;
          const listsContainer = document.getElementById('listsContainer');

          // Store the deleted list details for undo
          deletedLists.push({
            element: listContainer,
            nextSibling: listContainer.nextSibling,
            listsContainer: listsContainer
          });

          listsContainer.removeChild(listContainer);
        }

        function undoDelete() {
          if (deletedLists.length > 0) {
            const lastDeleted = deletedLists.pop(); // Get the last deleted list

            // Re-insert the deleted list
            if (lastDeleted.nextSibling) {
              lastDeleted.listsContainer.insertBefore(lastDeleted.element, lastDeleted.nextSibling);
            } else {
              lastDeleted.listsContainer.appendChild(lastDeleted.element);
            }
          }
        }

        async function fetchRank(domain, country, language, keyword) {
          try {
            const response = await fetch('https://w9opnioy78.execute-api.ap-southeast-1.amazonaws.com/checkRankingUrl', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                "keyword": keyword,
                "language": language,
                "location": country,
                "target": domain
              })
            });

            if (!response.ok) {
              throw new Error(`HTTP error ${response.status}`);
            }

            data = await response.json();

            return data
          } catch (error) {
            console.error("Error fetching rank:", error);
            return ('not available');
          }
        }


      </script>

      <style>
        .containerForMapping {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-around;
        }

        .list-container {
          width: 300px;
          margin: 10px;
          background-color: #fff;
          border: 1px solid #ccc;
          border-radius: 15px;
          padding: 10px;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
          position: relative;
        }

        .keyword-list {
          list-style: none;
          padding: 0;
          margin: 0;
          min-height: 200px;
          /* Starting height */
        }

        .keyword-list li {
          background-color: #eee;
          border: 1px solid #ddd;
          padding: 8px 12px;
          margin: 10px;
          cursor: grab;
          border-radius: 20px;
          user-select: none;
        }

        .keyword-list li:hover {
          background-color: #ddd;
        }

        .keyword-list.drag-over {
          background-color: #f9f9f9;
          border: 2px dashed #aaa;
        }

        .rotate {
          animation: rotate-clockwise-animation 2s linear infinite;
          display: inline-block;
          /* Important for transform to work */
        }

        .collapsible50 {
          border-radius: 20px;
          background: rgba(222, 222, 222, .4);
          color: #585c5d;
          margin-top: 5px;
          margin-bottom: 5px;
          padding: 10px 20px;
          border: none;
          margin: 5px;
        }

        .collapsible50:active {
          background: #6861ce;
          color: white;
        }

        .time-to-rank-0-3 {
          background-color: #c6efc6;
          /* Example: Light green */
        }

        .time-to-rank-3-6 {
          background-color: #9bd3ae;
          /* Example: Medium green */
        }

        .time-to-rank-6-9 {
          background-color: #ffda66;
          /* Example: Yellow */
        }

        .time-to-rank-9-12 {
          background-color: #fbb668;
          /* Example: Orange */
        }

        .time-to-rank-more-than-12 {
          background-color: #f4746b;
          /* Example: Red */
        }

        @keyframes rotate-clockwise-animation {
          0% {
            transform: rotate(0deg);
          }

          100% {
            transform: rotate(360deg);
          }
        }
      </style>

      <div class="container">
        <div class="page-inner">
          <div class="page-header">
            <h3 class="fw-bold mb-3">Keyword Analysis</h3>
            <button style="margin:5px 0 0 20px" type="button" class="btn btn-icon btn-round btn-info"
              onclick="launchDriver(keyword_analysis_steps)">
              <i class="fas fa-question"></i>
            </button>
          </div>
          <div class="row">
            <div class="card">
              <div class="card-header">
                <div class="card-title">Client Information</div>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <div id="keywordAnalysisUrlDiv" class="form-group">
                      <label for="text">URL</label>
                      <input type="text" class="form-control" id="keyword_analysis_url" placeholder="Enter URL" />
                      <small id="keywordAnalysisUrlHelp" class="form-text text-muted" style="display:none;">Either key
                        in a URL / domain and/or keywords to proceed.</small>
                    </div>
                    <div class="form-group">
                      <div id="domainOrWebpage">
                        <label class="form-label">Analysis Type</label>
                        <div class="selectgroup w-100">
                          <label class="selectgroup-item">
                            <input type="radio" name="keywordAnalysisType" value="domain" class="selectgroup-input"
                              id="keywordAnalysisTypeDomain" checked />
                            <span class="selectgroup-button">Domain</span>
                          </label>
                          <label class="selectgroup-item">
                            <input type="radio" name="keywordAnalysisType" value="webpage" class="selectgroup-input"
                              id="keywordAnalysisTypeWebpage" />
                            <span class="selectgroup-button">Webpage</span>
                          </label>
                        </div>
                      </div>
                      <div class="row" id="countryAndLanguage">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label for="keywordAnalysisCountry">Country</label>
                            <select class="form-select form-control-sm" id="keywordAnalysisCountry">
                              <option value="Singapore">Singapore</option>
                              <option value="None">Global</option>
                              <option value="Australia">Australia</option>
                              <option value="Bhutan">Bhutan</option>
                              <option value="Brazil">Brazil</option>
                              <option value="Canada">Canada</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label for="keywordAnalysisLanguage">Language</label>
                            <select class="form-select form-control-sm" id="keywordAnalysisLanguage">
                              <option value="English">English</option>
                              <option value="Arabic">Arabic</option>
                              <option value="Chinese (Simplified)">Chinese (Simplified)</option>
                              <option value="Chinese (Traditional)">Chinese (Traditional)</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group" id="keywordAnalysisKeywordsDiv">
                      <label for="comment" id="keywordCountDisplay">Keywords</label>
                      <textarea class="form-control" id="keyword_analysis_keywords" rows="5"></textarea>
                      <small id="keywordAnalysisKeywordsHelp" class="form-text text-muted" style="display:none;">Either
                        key in keywords and/or URL to proceed.</small>
                      <br>
                      <button class="btn btn-success" id="mapKeywordsBtn" onclick="mapKeywords()">Map
                        Keywords</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-action">
                <button class="btn btn-success" id="keywordAnalysisSubmit" onclick="keywordAnalysis()">Submit</button>
                <button class="btn btn-danger" onclick="clearKeywordAnalysis()">Clear</button>
              </div>
            </div>
          </div>

          <div class='row'>
            <div class="card" id="queriedKeywordsCard" style="display: none;">
              <div class="card-header">
                <h4 id="queriedKeywordsHeader" class="card-title">Queried Keywords</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive" style="height: auto;">
                  <table id="queriedKeywordsTable" class="display table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>No.</th>
                        <th>Keyword</th>
                        <th>Current Rank</th>
                        <th>URL</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class='row'>
            <div class="card" id="keywordsSummaryCard" style="display: none;">
              <div class="card-header">
                <h4 id="keywordsSummaryHeader" class="card-title">Keywords Summary</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive" style="height: auto;">
                  <table id="overall-summary" class="display table table-striped table-hover">
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="card" id="combinedCards" style="display:none">
                <div class="card-body">
                  <ul class="nav nav-pills nav-secondary" id="pills-tab" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" href="#pills-home" role="tab"
                        aria-controls="pills-home" aria-selected="true">Ranked Keywords</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" href="#pills-profile" role="tab"
                        aria-controls="pills-profile" aria-selected="false">Similar Keywords</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" href="#pills-contact" role="tab"
                        aria-controls="pills-contact" aria-selected="false">Based on Content</a>
                    </li>
                  </ul>
                  <div class="tab-content mt-2 mb-3" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel"
                      aria-labelledby="pills-ranking-tab">
                      <div class="table-responsive" style="height: 487px;">
                        <table id="rankingKeywordsTable" class="display table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>Keyword</th>
                              <th>Search Vol</th>
                              <th>Rank</th>
                              <th>CPC</th>
                              <th>Add</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade show" id="pills-profile" role="tabpanel"
                      aria-labelledby="pills-profile-tab">
                      <div class="table-responsive">
                        <table id="similarKeywordsTable" class="display table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>Keyword</th>
                              <th>Search Vol</th>
                              <th>Difficulty</th>
                              <th>CPC</th>
                              <th>Add</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade show" id="pills-contact" role="tabpanel"
                      aria-labelledby="pills-contact-tab">
                      <div class="table-responsive">
                        <table id="webpageKeywordsTable" class="display table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>Keyword</th>
                              <th>Search Vol</th>
                              <th>Competition</th>
                              <th>Search Intent</th>
                              <th>Reason</th>
                              <th>Add</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card" id="serpCard" style="display: none;">
                <div class="card-header">
                  <h4 id="serpHeader" class="card-title">SERP</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table id="serpTable" class="display table table-striped table-hover">
                      <thead>
                        <tr>
                          <th>Rank</th>
                          <th style="width: 15px;">URL</th>
                          <th>Title</th>
                          <th>Description</th>
                          <th>DA</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="card" id="keywordMappingCard" style="display:none">
              <div class="card-header">
                <div class="card-title">Keyword Mapping</div>
              </div>
              <div class="card-body">
                <div class="d-flex justify-content-start mb-3">
                  <button class="btn btn-success me-2" onclick="addNewList()"><i class="fas fa-plus me-1"></i> Add New
                    URL</button>
                  <button class="btn btn-secondary" onclick="undoDelete()"><i class="fas fa-undo me-1"></i> Undo
                    Delete</button>
                </div>
                <div class="containerForMapping" id="listsContainer"></div>
                <div class="d-flex justify-content-around flex-wrap">
                  <div class="card shadow-sm mb-3" style="width: 280px;"></div>
                </div>
                <div id="onPageRecommendations"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="footer">
        <div class="container-fluid d-flex justify-content-between">
          <nav class="pull-left">
            <ul class="nav">
              <li class="nav-item">
                <a class="nav-link" href="http://www.themekita.com">
                  ThemeKita
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#"> Help </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#"> Licenses </a>
              </li>
            </ul>
          </nav>
          <div class="copyright">
            2024, made with <i class="fa fa-heart heart text-danger"></i> by
            <a href="http://www.themekita.com">ThemeKita</a>
          </div>
          <div>
            Distributed by
            <a target="_blank" href="https://themewagon.com/">ThemeWagon</a>.
          </div>
        </div>
      </footer>
    </div>
  </div>

  <script>

    function removeMockData() {
      document.getElementById("queriedKeywordsCard").innerHTML = `
              <div class="card-header">
                <h4 id="queriedKeywordsHeader" class="card-title">Queried Keywords</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive" style="height: auto;">
                  <table id="queriedKeywordsTable" class="display table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>No.</th>
                        <th>Keyword</th>
                        <th>Current Rank</th>
                        <th>URL</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
              </div>`;
      document.getElementById("queriedKeywordsCard").style.display = "none";

      document.getElementById("combinedCards").innerHTML = `
                <div class="card-body">
                  <ul class="nav nav-pills nav-secondary" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                      <a class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Ranked Keywords</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false" tabindex="-1">Similar Keywords</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false" tabindex="-1">Based on Content</a>
                    </li>
                  </ul>
                  <div class="tab-content mt-2 mb-3" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-ranking-tab">
                      <div class="table-responsive" style="height: 487px;">
                        <table id="rankingKeywordsTable" class="display table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>Keyword</th>
                              <th>Search Vol</th>
                              <th>Rank</th>
                              <th>CPC</th>
                              <th>Add</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade show" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                      <div class="table-responsive">
                        <table id="similarKeywordsTable" class="display table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>Keyword</th>
                              <th>Search Vol</th>
                              <th>Difficulty</th>
                              <th>CPC</th>
                              <th>Add</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade show" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                      <div class="table-responsive">
                        <table id="webpageKeywordsTable" class="display table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>Keyword</th>
                              <th>Search Vol</th>
                              <th>Competition</th>
                              <th>Search Intent</th>
                              <th>Reason</th>
                              <th>Add</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
            `;

      document.getElementById("combinedCards").style.display = "none";

      document.getElementById("keywordMappingCard").innerHTML = `
              <div class="card-header">
                <div class="card-title">Keyword Mapping</div>
              </div>
              <div class="card-body">
                <div class="d-flex justify-content-start mb-3">
                  <button class="btn btn-success me-2" onclick="addNewList()"><i class="fas fa-plus me-1"></i> Add New
                    URL</button>
                  <button class="btn btn-secondary" onclick="undoDelete()"><i class="fas fa-undo me-1"></i> Undo
                    Delete</button>
                </div>
                <div class="containerForMapping" id="listsContainer"></div>
                <div class="d-flex justify-content-around flex-wrap">
                  <div class="card shadow-sm mb-3" style="width: 280px;"></div>
                </div>
                <div id="onPageRecommendations"></div>
              </div>`;
      document.getElementById("keywordMappingCard").style.display = "none";

      document.getElementById('serpCard').innerHTML = `
                <div class="card-header">
                  <h4 id="serpHeader" class="card-title">SERP</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table id="serpTable" class="display table table-striped table-hover">
                      <thead>
                        <tr>
                          <th>Rank</th>
                          <th style="width: 15px;">URL</th>
                          <th>Title</th>
                          <th>Description</th>
                          <th>DA</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
                  </div>
                </div>`;
              document.getElementById("serpCard").style.display = "none";

        document.getElementById('keywordsSummaryCard').innerHTML = `
              <div class="card-header">
                <h4 id="keywordsSummaryHeader" class="card-title">Keywords Summary</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive" style="height: auto;">
                  <table id="overall-summary" class="display table table-striped table-hover">
                  </table>
                </div>
              </div>`;
            document.getElementById('keywordsSummaryCard').style.display = "none";
    }

    function mockDataDemo() {
      document.getElementById("queriedKeywordsCard").innerHTML = `
              <div class="card-header">
                <h4 id="queriedKeywordsHeader" class="card-title">Queried Keywords</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive" style="height: auto;">
                  <table id="queriedKeywordsTable" class="display table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>No.</th>
                        <th>Keyword</th>
                        <th>Current Rank</th>
                        <th>URL</th>
                      </tr>
                    </thead>
                    <tbody><tr><td>1</td><td>digital marketing singapore</td><td>21</td><td><a href="https://mediaonemarketing.com.sg/" target="_blank">https://mediaonemarketing.com.sg/</a></td></tr><tr><td>1</td><td>digital marketing singapore</td><td>81</td><td><a href="https://mediaonemarketing.com.sg/top-digital-marketing-agencies-singapore/" target="_blank">https://mediaonemarketing.com.sg/top-digital-marketing-agencies-singapore/</a></td></tr></tbody>
                  </table>
                </div>
              </div>`;

      document.getElementById("queriedKeywordsCard").style.display = "block";


      document.getElementById("keywordMappingCard").innerHTML = `
              <div class="card-header">
                <div class="card-title">Keyword Mapping</div>
              </div>
              <div class="card-body">
                <div class="d-flex justify-content-start mb-3">
                  <button class="btn btn-success me-2" onclick="addNewList()"><i class="fas fa-plus me-1"></i> Add New
                    URL</button>
                  <button class="btn btn-secondary" onclick="undoDelete()"><i class="fas fa-undo me-1"></i> Undo
                    Delete</button>
                </div>
                <div class="containerForMapping" id="listsContainer"></div>
                <div class="d-flex justify-content-around flex-wrap">
                  <div class="card shadow-sm mb-3" style="width: 280px;"></div>
                </div>
                <div id="onPageRecommendations"></div>
              </div>`;
      document.getElementById("keywordMappingCard").style.display = "none";

      document.getElementById("combinedCards").innerHTML = `
                <div class="card-body">
                  <ul class="nav nav-pills nav-secondary" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                      <a class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Ranked Keywords</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false" tabindex="-1">Similar Keywords</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false" tabindex="-1">Based on Content</a>
                    </li>
                  </ul>
                  <div class="tab-content mt-2 mb-3" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-ranking-tab">
                      <div class="table-responsive" style="height: 487px;">
                        <table id="rankingKeywordsTable" class="display table table-striped table-hover" data-sort-direction="asc">
                          <thead>
                            <tr>
                              <th style="cursor: pointer;">Keyword</th>
                              <th style="cursor: pointer;">Search Vol</th>
                              <th style="cursor: pointer;">Rank</th>
                              <th style="cursor: pointer;">CPC</th>
                              <th style="cursor: pointer;">Add</th>
                            </tr>
                          </thead>
                          <tbody><tr><td>mycareersfuture</td><td>74000</td><td>23</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google images</td><td>33100</td><td>8</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>my careers future</td><td>27100</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore linkedin</td><td>18100</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>advertise with google ads</td><td>18100</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agencies</td><td>9900</td><td>12</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agency</td><td>9900</td><td>23</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency ads</td><td>9900</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency marketing</td><td>9900</td><td>17</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>meta business suite</td><td>8100</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sg website design</td><td>5400</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>website design service singapore</td><td>5400</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>website design companies singapore</td><td>5400</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore website design</td><td>5400</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>website design company singapore</td><td>5400</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>website design services singapore</td><td>5400</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>website design sg</td><td>5400</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>mycareersfuture sg</td><td>4400</td><td>14</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>internsg</td><td>4400</td><td>17</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social medias</td><td>3600</td><td>7</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>etsy singapore</td><td>3600</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google gmb</td><td>2900</td><td>14</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>adsense</td><td>2900</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google tag manager</td><td>2900</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>business grant portal</td><td>2900</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google adsense</td><td>2900</td><td>17</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google my business</td><td>2900</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>mycareersfuture singapore</td><td>2400</td><td>17</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>affiliate marketing</td><td>2400</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>camping sites singapore</td><td>2400</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sg influencer</td><td>1900</td><td>3</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>influencer sg</td><td>1900</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>influencers singapore</td><td>1900</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore influencers</td><td>1900</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>influencer singapore</td><td>1900</td><td>5</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore influencer</td><td>1900</td><td>5</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agency near me</td><td>1900</td><td>7</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>influencer</td><td>1900</td><td>9</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agencies near me</td><td>1900</td><td>10</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>blogshops in sg</td><td>1900</td><td>13</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore digital marketing agency</td><td>1900</td><td>13</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>blogshops sg</td><td>1900</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online marketing agency singapore</td><td>1900</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sg blogshops</td><td>1900</td><td>17</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>blogshop singapore</td><td>1900</td><td>18</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing companies in singapore</td><td>1900</td><td>18</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>gumtree in singapore</td><td>1900</td><td>18</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore blogshops</td><td>1900</td><td>18</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google keyword planner</td><td>1900</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agency singapore</td><td>1900</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>gumtree singapore</td><td>1900</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>business suite</td><td>1600</td><td>12</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>emcee</td><td>1600</td><td>12</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore branding</td><td>1600</td><td>13</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online shopping</td><td>1600</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore directories</td><td>1600</td><td>14</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online shopping online</td><td>1600</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online shopping sites sg</td><td>1600</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sg online shopping sites</td><td>1600</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>shoppers shop online</td><td>1600</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online shopping in singapore</td><td>1600</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online shopping online shopping</td><td>1600</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>shopping shop online</td><td>1600</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>franchises</td><td>1600</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore online sales</td><td>1600</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>emcee singapore</td><td>1300</td><td>1</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>emcees in singapore</td><td>1300</td><td>1</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>emcees singapore</td><td>1300</td><td>1</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore emcee</td><td>1300</td><td>2</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore emcees</td><td>1300</td><td>1</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>reviews glassdoor</td><td>1300</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>franchises in singapore</td><td>1300</td><td>10</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>little red book</td><td>1300</td><td>13</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>bgp portal</td><td>1300</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>franchise singapore</td><td>1300</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo agencies in singapore</td><td>1300</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore franchise</td><td>1300</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo agencies singapore</td><td>1300</td><td>21</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo agency singapore</td><td>1300</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media agency singapore</td><td>1000</td><td>2</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing agency in singapore</td><td>1000</td><td>3</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>how online earning money</td><td>1000</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>how to earn income online</td><td>1000</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing agency singapore</td><td>1000</td><td>4</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore social media marketing agency</td><td>1000</td><td>5</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketers jobs</td><td>1000</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing jobs</td><td>1000</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing vacancies</td><td>1000</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing vacancy</td><td>1000</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>jobs with digital marketing</td><td>1000</td><td>20</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>ppc</td><td>1000</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo agencies</td><td>880</td><td>6</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>wordpress and websites</td><td>880</td><td>6</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agency</td><td>880</td><td>19</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>blogshops singapore</td><td>880</td><td>11</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>how how to make money online</td><td>880</td><td>9</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing advertising agency</td><td>880</td><td>10</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>making money online how</td><td>880</td><td>10</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>business directories singapore</td><td>880</td><td>11</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing ads agency</td><td>880</td><td>11</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo optimization services</td><td>880</td><td>11</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency digital marketing</td><td>880</td><td>12</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>craigslist singapore</td><td>880</td><td>12</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>business directory singapore</td><td>880</td><td>15</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing and advertising company</td><td>880</td><td>14</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agencies</td><td>880</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>meta business</td><td>880</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo services</td><td>880</td><td>16</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo agency</td><td>880</td><td>22</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency for digital marketing</td><td>880</td><td>18</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade show" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                      <div class="table-responsive">
                        <table id="similarKeywordsTable" class="display table table-striped table-hover" data-sort-direction="asc">
                          <thead>
                            <tr>
                              <th style="cursor: pointer;">Keyword</th>
                              <th style="cursor: pointer;">Search Vol</th>
                              <th style="cursor: pointer;">Difficulty</th>
                              <th style="cursor: pointer;">CPC</th>
                              <th style="cursor: pointer;">Add</th>
                            </tr>
                          </thead>
                          <tbody><tr><td>digital marketing singapore</td><td>700</td><td>30</td><td>10.74</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agency singapore</td><td>1900</td><td>35</td><td>11.99</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital agency singapore</td><td>260</td><td>29</td><td>8.289999961853027</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing company singapore</td><td>1900</td><td>32</td><td>15.649999618530273</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agencies singapore</td><td>880</td><td>31</td><td>15.15999984741211</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing agency singapore</td><td>1000</td><td>27</td><td>9.05</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital marketing agency singapore</td><td>140</td><td>25</td><td>16.790000915527344</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>content marketing agency singapore</td><td>100</td><td>30</td><td>5.86</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top digital marketing agency singapore</td><td>170</td><td>31</td><td>16.6200008392334</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top marketing agency singapore</td><td>270</td><td>21</td><td>9.28</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital advertising singapore</td><td>30</td><td>25</td><td>6.95</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore social media agency</td><td>1000</td><td>39</td><td>9.05</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>boutique social media agency singapore</td><td>40</td><td>15</td><td>7.31</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>boutique digital marketing agency singapore</td><td>20</td><td>28</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best marketing agency singapore</td><td>260</td><td></td><td>14.520000457763672</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>advertising agencies in singapore</td><td>720</td><td>22</td><td>5.08</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing firms singapore</td><td>320</td><td></td><td>12.779999732971191</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing agency in singapore</td><td>1000</td><td>30</td><td>9.05</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online marketing singapore</td><td>210</td><td>36</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>ooh advertising singapore</td><td>60</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing service singapore</td><td>260</td><td>27</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital marketing agency in singapore</td><td>10</td><td>30</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top digital marketing companies in singapore</td><td>170</td><td>25</td><td>16.6200008392334</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing company singapore</td><td>50</td><td>31</td><td>8.37</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing sg</td><td>700</td><td>28</td><td>10.74</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media advertising cost singapore</td><td>10</td><td></td><td>2.42</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing cost singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agency sg</td><td>1900</td><td>33</td><td>11.99</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media advertising singapore</td><td>410</td><td>26</td><td>8.61</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online advertising singapore</td><td>30</td><td>18</td><td>12.16</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top advertising agency in singapore</td><td>20</td><td></td><td>8.06</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>internet marketing singapore</td><td>210</td><td>33</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>b2b digital marketing agency singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sem marketing singapore</td><td>50</td><td>31</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore social media marketing agency</td><td>1000</td><td>24</td><td>9.05</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo marketing in singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital media agency singapore</td><td>1900</td><td>31</td><td>11.99</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>ecommerce marketing agency singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital marketing company in singapore</td><td>10</td><td>30</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digimarcon singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital media companies in singapore</td><td>10</td><td></td><td>7.34</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing cost singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital advertising agency singapore</td><td>1900</td><td>21</td><td>11.99</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>programmatic advertising singapore</td><td>20</td><td>14</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>amobee singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>anjels media digital signage &amp; digital advertising expert singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital agencies singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital agency singapore</td><td>10</td><td>28</td><td>6.92</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital creative agency singapore</td><td>10</td><td>35</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing asia singapore</td><td>90</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing firm singapore</td><td>40</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing solutions singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital squad singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>dstnct singapore</td><td>10</td><td></td><td>6.76</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>equinet academy singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>fenzo digital singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>first page digital singapore 1 digital marketing &amp; seo agency</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>happy marketer singapore</td><td>10</td><td></td><td>11.13</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>ice cube marketing singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>internet marketing agency singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>internet marketing company singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>internet marketing in singapore</td><td>210</td><td>33</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>metia singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online marketing agency singapore</td><td>1900</td><td>29</td><td>15.649999618530273</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online marketing company singapore</td><td>20</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online marketing seo singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>outrankco sg</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>reprise digital singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>search marketing agency singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sem agency in singapore</td><td>480</td><td>14</td><td>38.369998931884766</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo digital marketing agency singapore</td><td>10</td><td>42</td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo marketing company in singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>seo sem singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>singapore seo firm</td><td>1400</td><td>30</td><td>17.9</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>smarlling singapore web design &amp; digital marketing agency</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top digital agencies in singapore</td><td>10</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>web marketing singapore</td><td>210</td><td></td><td></td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade show" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                      <div class="table-responsive">
                        <table id="webpageKeywordsTable" class="display table table-striped table-hover" data-sort-direction="asc">
                          <thead>
                            <tr>
                              <th style="cursor: pointer;">Keyword</th>
                              <th style="cursor: pointer;">Search Vol</th>
                              <th style="cursor: pointer;">Competition</th>
                              <th style="cursor: pointer;">Search Intent</th>
                              <th style="cursor: pointer;">Reason</th>
                              <th style="cursor: pointer;">Add</th>
                            </tr>
                          </thead>
                          <tbody><tr><td>marketing agency</td><td>9900</td><td>0.29</td><td>commercial</td><td>High search volume and low competition indicate potential for conversions.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing</td><td>3600</td><td>0.44</td><td>commercial</td><td>Widely searched term relevant to industry growth and services offered.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agency</td><td>880</td><td>0.19</td><td>commercial</td><td>Search volume is substantial, suggesting a viable market.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency for marketing</td><td>9900</td><td>0.29</td><td>commercial</td><td>High volume and moderate competition make it attractive for SEO efforts.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing agency</td><td>480</td><td>0.11</td><td>commercial</td><td>Low competition indicates a higher chance for rank success.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing agency singapore</td><td>1900</td><td>0.13</td><td>commercial</td><td>Location-specific keyword with good volume and low competition.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best marketing agency</td><td>140</td><td>0.06</td><td>informational</td><td>Targets users looking for top services, ideal for building authority.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>content marketing</td><td>590</td><td>0.19</td><td>informational</td><td>Relevant for driving traffic in the content space with low competition.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital marketing agency</td><td>140</td><td>0.06</td><td>commercial</td><td>Focuses on high-conversion searches for agency services.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>performance marketing</td><td>390</td><td>0.34</td><td>commercial</td><td>It addresses a critical area in marketing with a growing interest.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>advertising agency singapore</td><td>720</td><td>0.29</td><td>commercial</td><td>Local relevance and appropriate search volume for targeted marketing.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing strategies</td><td>880</td><td>0.3</td><td>informational</td><td>Focuses on users seeking insights, helpful for content marketing.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing services</td><td>320</td><td>0.06</td><td>commercial</td><td>Low competition and high search intent indicate a positive opportunity.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>google ads agency singapore</td><td>140</td><td>0.07</td><td>commercial</td><td>Specific to a location and service, low competition.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing digital marketing</td><td>3600</td><td>0.44</td><td>commercial</td><td>Combines two high-interest keywords for targeted SEO.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing course singapore</td><td>880</td><td>0.46</td><td>informational</td><td>Focuses on education and training for growing digital marketing skills.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>why digital marketing</td><td>10</td><td>0</td><td>informational</td><td>Addresses the curiosity of new marketers, high traffic potential.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sem agency singapore</td><td>480</td><td>0.07</td><td>commercial</td><td>Niche keyword with low competition, targeting specific services.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media marketing agency singapore</td><td>1000</td><td>0.14</td><td>commercial</td><td>Threshold of high volume for commercial potential with local focus.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top digital marketing agency</td><td>140</td><td>0.06</td><td>commercial</td><td>Focused on competitive agency services providing significant visibility.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital advertising agency singapore</td><td>10</td><td>0</td><td>commercial</td><td>Specific to location with minimal competition, suggesting higher rankings.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>internet marketing companies</td><td>10</td><td>0</td><td>commercial</td><td>Categorical keyword relevant to numerous small firms in the agency space.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>freelance digital marketing agency</td><td>10</td><td>0</td><td>commercial</td><td>Addresses the growing gig economy in marketing services.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media management agency</td><td>10</td><td>0</td><td>commercial</td><td>Captures a niche service area with high local demand.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>search engine marketing services</td><td>10</td><td>0</td><td>commercial</td><td>Focused on essential services many businesses wish to engage with.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency marketing</td><td>9900</td><td>0.29</td><td>commercial</td><td>Engages an audience seeking marketing solutions with high intent.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency marketing solutions</td><td>10</td><td>0</td><td>commercial</td><td>Keywords target agency practices for clients looking for innovative solutions.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>performance digital marketing</td><td>10</td><td>0</td><td>commercial</td><td>Captures a growing trend focusing on measurable outcomes in marketing.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>top digital marketing companies</td><td>10</td><td>0</td><td>commercial</td><td>Useful for comparative rankings, which appeals to many businesses.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>international digital marketing agency</td><td>10</td><td>0</td><td>commercial</td><td>Focuses on global outreach strategies, appealing to diverse markets.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>effective marketing services</td><td>10</td><td>0</td><td>commercial</td><td>Targets businesses needing impactful marketing strategies.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>results oriented marketing</td><td>10</td><td>0</td><td>commercial</td><td>Appeals to clients focused on results and ROI from marketing.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing assistant</td><td>10</td><td>0</td><td>commercial</td><td>Attracts freelancers and assistants in the digital agency ecosystem.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>local marketing experts</td><td>10</td><td>0</td><td>commercial</td><td>Niche expert focus for tailored services in local markets.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>agency for digital marketing</td><td>10</td><td>0</td><td>commercial</td><td>Specific search for agencies underlines relevance and niche targeting.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>affordable digital marketing</td><td>10</td><td>0</td><td>commercial</td><td>Captures price-sensitive clients seeking effective marketing solutions.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>online marketing services</td><td>10</td><td>0</td><td>commercial</td><td>Broad applicability and relevance to current marketing needs.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>local agency marketing</td><td>10</td><td>0</td><td>commercial</td><td>Focus on locality for tailored agency marketing strategies.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>local advertising solutions</td><td>10</td><td>0</td><td>commercial</td><td>Targets businesses seeking local level engagement strategies.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>promotional agency</td><td>10</td><td>0</td><td>commercial</td><td>Concentrates on a service that is evergreen and sought after by brands.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>ideal marketing agency</td><td>10</td><td>0</td><td>informational</td><td>Helpful for users seeking guidance on specific marketing agency qualifications.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>performance marketing agency</td><td>10</td><td>0</td><td>commercial</td><td>Targets those interested in outcomes-driven marketing services.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>effective internet marketing</td><td>10</td><td>0</td><td>informational</td><td>A highly relevant question in the current marketing climate.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agency news</td><td>10</td><td>0</td><td>informational</td><td>Keeps industry participants informed about changes, trends, and updates.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing research</td><td>10</td><td>0</td><td>informational</td><td>Vital for professionals looking for the latest data and analyses in the field.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing opportunities</td><td>10</td><td>0</td><td>informational</td><td>Focuses on career and business prospects in the growing digital landscape.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing agency costs</td><td>10</td><td>0</td><td>informational</td><td>Informs clients on budgeting and price trends in agency services.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best online marketing tools</td><td>10</td><td>0</td><td>informational</td><td>Captures interest for quality tools aiding digital marketing efforts.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>social media advertising agency</td><td>10</td><td>0</td><td>commercial</td><td>Vital service for brands wanting to leverage social media visibility.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>successful marketing tools</td><td>10</td><td>0</td><td>informational</td><td>Promotes understanding of effective software and tools in agencies.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>site marketing agency</td><td>10</td><td>0</td><td>commercial</td><td>Highlights marketing potential of agency services that help structure site visibility.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital marketing campaigns</td><td>10</td><td>0</td><td>informational</td><td>Focuses on the effectiveness of various campaigns in digital spaces.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>best digital marketing tools</td><td>10</td><td>0</td><td>informational</td><td>A comprehensive search for the most effective tools to use in marketing.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>sg digital marketing agencies</td><td>10</td><td>0</td><td>commercial</td><td>Targets a specific market with tailored, location-specific agencies.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>market research agency</td><td>10</td><td>0</td><td>informational</td><td>Addresses a critical need for businesses to understand their market landscape.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>advertising platforms</td><td>10</td><td>0</td><td>informational</td><td>Help brands find platforms for effective advertising.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>branding agency services</td><td>10</td><td>0</td><td>commercial</td><td>Focuses on important elements of branding within marketing.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>b marketing agency</td><td>10</td><td>0</td><td>commercial</td><td>Simplicity allows easy understanding and searchability.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>award winning advertising agency</td><td>10</td><td>0</td><td>informational</td><td>Appeals to businesses looking for the best in award-winning services.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>global marketing agency</td><td>10</td><td>0</td><td>commercial</td><td>Essential for brands looking to expand marketing outreach globally.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>growth digital marketing</td><td>10</td><td>0</td><td>commercial</td><td>Signals rising trends in marketing related to growth strategies.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>digital design agency</td><td>10</td><td>0</td><td>commercial</td><td>Combining design and digital marketing appeals to many clients.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>marketing strategy company</td><td>10</td><td>0</td><td>commercial</td><td>Targets agencies offering strategic marketing solutions.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr><tr><td>how to choose marketing agency</td><td>10</td><td>0</td><td>informational</td><td>Helps clients navigate the often complex agency selection process.</td><td><i class="fas fa-plus-circle clickable-plus"></i></td></tr></tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              `;
      document.getElementById("combinedCards").style.display = "block";

      document.getElementById("keywordMappingCard").innerHTML = `
              <div class="card-header">
                <div class="card-title">Keyword Mapping</div>
              </div>
              <div class="card-body">
                <div class="d-flex justify-content-start mb-3">
                  <button class="btn btn-success me-2" onclick="addNewList()"><i class="fas fa-plus me-1"></i> Add New
                    URL</button>
                  <button class="btn btn-secondary" onclick="undoDelete()"><i class="fas fa-undo me-1"></i> Undo
                    Delete</button>
                </div>
                <div class="containerForMapping" id="listsContainer"><div class="list-container"><input type="text" class="border rounded p-2 flex-grow-1 me-2" value="targeted-domain/url"><button class="btn btn-sm btn-outline-danger"><i class="fas fa-times" <="" i=""></i></button><ul id="list1" class="keyword-list"><li draggable="true" id="digital marketing singapore">digital marketing singapore</li></ul><button class="btn btn-primary w-100" style="display: block;">Page Recommendations</button></div></div>
                <div class="d-flex justify-content-around flex-wrap">
                  <div class="card shadow-sm mb-3" style="width: 280px;"></div>
                </div>
                <div id="onPageRecommendations"></div>
              </div>`;
      document.getElementById("keywordMappingCard").style.display = "block";

      document.getElementById('serpCard').innerHTML = `
                <div class="card-header">
                  <h4 id="serpHeader" class="card-title">SERP for flyers in singapore</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table id="serpTable" class="display table table-striped table-hover" data-sort-direction="asc">
                      <thead>
                        <tr>
                          <th style="cursor: pointer;">Rank</th>
                          <th style="width: 15px; cursor: pointer;">URL</th>
                          <th style="cursor: pointer;">Title</th>
                          <th style="cursor: pointer;">Description</th>
                          <th style="cursor: pointer;">DA</th>
                        </tr>
                      </thead>
                      <tbody><tr><td>1</td><td>https://www.singaporeflyer.com/?srsltid=AfmBOorfxv-XaM4gLHTLCtiGzjJEUrxvNi0nKFcO_MAQjDaydK3I3Viv</td><td>Singapore Flyer: Home</td><td>Singapore Flyer, one of the largest observation wheels in the world. Marvel at the breathtaking views of Marina Bay from the Singapore Flyer's capsules.</td></tr><tr><td>2</td><td>https://www.gogoprint.sg/flyers.html?srsltid=AfmBOoqpyXwW0S5tLaKwR19BWCuiXw4NspO6wwHWvwewkvw0jDQypXwi</td><td>Economy Flyer Printing Singapore</td><td>Affordable economy flyer printing options starting at S$5.45. Choose from art &amp; simili paper options (min 100 pcs). Same-day delivery in Singapore&nbsp;...</td></tr><tr><td>3</td><td>https://www.alibabaprinting.sg/flyer-distribution-laws-in-singapore-2025-guidelines/?srsltid=AfmBOoorPa9hpuEeonDDatgSKFXEzs2tVMAAtQuuwjjJski_gcs6zZam</td><td>Flyer Distribution Laws in Singapore 2025 | Guidelines</td><td>Where are businesses allowed to distribute flyers in Singapore? Businesses can hand out flyers in public spots like flyer zones, walkways, and&nbsp;...</td></tr><tr><td>4</td><td>https://www.vistaprint.sg/marketing-materials/flyers?srsltid=AfmBOoo641qrWHY-bAMs-MbBtRtlDqbILxlA8mjrVYXM9JD-4qTSSQtm</td><td>Flyer Printing: Make a pamphlet in DL or A3-A7</td><td>Flyers and pamphlets printed by Vistaprint Singapore are a great way to tell your customers a complete story about your business.</td></tr><tr><td>5</td><td>http://www.flyer.com.sg/</td><td>24 Hours Printing Services, Cheapest Flyer Printing Singapore</td><td>We specialize primarily in the printing and distribution of flyers into HBD units, Commercial offices, Street, landed Properties and Cars.</td></tr><tr><td>6</td><td>https://flyerdistributionsg.com.sg/</td><td>Flyer Distribution SG</td><td>Flyer Distribution SG provides a one stop solution offering Printing, Flyer Design and seeks to help you to reach out to your target audience effectively&nbsp;...</td></tr><tr><td>7</td><td>https://www.gogoprint.sg/printing/flyers.html?srsltid=AfmBOoqd32BoiWxfJoY0k4M_KUHbsFIXL6WL923q4AzgSroUkdZ9hOs9</td><td>Affordable Flyer Printing Singapore</td><td>Starting from S$5.45, print quality leaflets &amp; brochures with a variety of paper, refinement &amp; size options. Same-day delivery in Singapore available!</td></tr><tr><td>8</td><td>https://www.singaporeflyer.com/en/ticket/singapore-flyer-ticket?srsltid=AfmBOoryc-uOD5O5dSdcYCogyPMIqQzVUU7ER371TR1rEm4490fOUsoD</td><td>Singapore Flyer Ticket</td><td>Step into a whole new perspective aboard the iconic Singapore Flyer, one of the world's largest observation wheels. Soar 165 metres above ground.</td></tr><tr><td>9</td><td>https://www.eight.sg/</td><td>Flyer Printing | Cheapest 24 Hour Services | Express | Fast ...</td><td>Discover top-notch flyer printing services in Singapore. At our renowned printing company, we provide affordable options for high-quality print flyers.</td></tr><tr><td>10</td><td>https://www.flyerdistributionsingapore.com/flyer-distribution-singapore/</td><td>FLYER DISTRIBUTION Singapore</td><td>Flyer Distribution in Singapore, Car Park Flyer Distribution, Flyer Distribution Landed, Commercial Flyer Distribution, Condo Flyer Distribution, Door To Door&nbsp;...</td></tr></tbody>
                    </table>
                  </div>
                </div>`;
              document.getElementById("serpCard").style.display = "block";

        document.getElementById('keywordsSummaryCard').innerHTML = `
              <div class="card-header">
                <h4 id="keywordsSummaryHeader" class="card-title">Keywords Summary</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive" style="height: auto;">
                  <table id="overall-summary" class="display table table-striped table-hover">
              <div class="table-container">
                  
                      </div><thead>
                          <tr>
                              <th>No.</th>
                              <th onclick="sortSummaryTable('keyword')">Keyword</th>
                              <th onclick="sortSummaryTable('search_volume')">Search Volume</th>
                              <th onclick="sortSummaryTable('cpc')">CPC</th>
                              <th onclick="sortSummaryTable('timeToRank')">Time to Rank</th>
                              <th>Reason</th>
                              
                          </tr>
                      </thead>
                      <tbody>
              
                <tr>
                  <td>1</td>
                  <td>digital marketing singapore</td>
                  <td>700</td>
                  <td>10.74</td>
                  <td class="time-to-rank-0-3">0-3 months</td>
                  <td><textarea class="multiline-input" id="reason-0" onchange="updateReason(0, this.value)">This keyword targets a specific, high-demand market, enhancing local visibility and driving relevant traffic to a leading digital marketing agency in Singapore.</textarea></td>
                  </tr>
              
                    </tbody>
                
            
            </table>
                </div>
              </div>`;
            document.getElementById('keywordsSummaryCard').style.display = "block";
    }

    // Help prompts
    const driver = window.driver.js.driver;
    navigation_steps = [
      { element: '#mascotBtn', popover: { title: 'Digimetrics Helper', description: 'Click on me for a guided walkthrough. Click anywhere outside the box at anytime to leave the walkthrough.', side: "left", align: 'center' } },
      { element: '#topNavToggler', popover: { title: 'Top Navigation Toggler', description: 'Click here to expand / hide the listing of functions.', side: "left", align: 'center' } },
      { element: '#navbarNav', popover: { title: 'Top Navigation Toggler', description: 'The green tick shows which functions have been done and the one in bold is the current function that you are on.', side: "left", align: 'center' } },
      { element: '#leftNav', popover: { title: 'Left Navigation Toggler', description: 'You can also expand / collapse the navigational menu here.', side: "left", align: 'center' } },
    ]

    keyword_analysis_steps = [
      { element: '#keywordAnalysisUrlDiv', popover: { title: 'Keyword Analysis', description: 'Start by entering the URL of your target domain or URL Entering this field would allow you to find ranking keywords for the domain/webpage.', side: "bottom", align: 'center' } },
      { element: '#domainOrWebpage', popover: { title: 'Keyword Analysis', description: 'Choose whether you are analysing the whole domain or just one specific URL.', side: "bottom", align: 'center' } },
      { element: '#countryAndLanguage', popover: { title: 'Keyword Analysis', description: 'Choose the Country and Language accordingly.', side: "bottom", align: 'center' } },
      { element: '#keywordAnalysisKeywordsDiv', popover: { title: 'Keyword Analysis', description: 'Enter any targeted keywords here. This is required for the generation of related keywords and also to check the ranking, search volume, CPC, etc. for each keyword.', side: "right", align: 'center' } },
      { element: '#keywordAnalysisSubmit', popover: { title: 'Keyword Analysis', description: 'Click Submit to get Ranking Keywords, Related Keywords, Current Rankings, Keywords based on Page Content and Estimated Time To Rank', onNextClick: () => { mockDataDemo(); driverObj.moveNext(); }, side: "bottom", align: 'center' } },
      { element: '#queriedKeywordsCard', popover: { title: 'Keyword Analysis', description: 'If your queried keywords are ranking for your target, they will appear here. The No. column value will be repeated if the keyword appears in the SERPs more than once.', side: "bottom", align: 'center' } },
      { element: '#pills-tab', popover: { title: 'Keyword Analysis', description: 'There are three tabs on this card.', side: "right", align: 'center' } },
      { element: '#pills-home-tab', popover: { title: 'Keyword Analysis', description: 'Ranked Keywords shows the keywords that your domain or page is ranking for.', side: "right", align: 'center' } },
      { element: '#pills-profile-tab', popover: { title: 'Keyword Analysis', description: 'Similar Keywords shows the keywords that you have entered and more variations of those keywords.', side: "right", align: 'center' } },
      { element: '#pills-contact-tab', popover: { title: 'Keyword Analysis', description: 'Based on content shows the keywords that have been extracted based on your webpage\'s content.', side: "right", align: 'center' } },
      { element: '#rankingKeywordsTable thead', popover: { title: 'Keyword Analysis', description: 'Clicking on the headers will sort the rows by that column.', side: "right", align: 'center' } },
      { element: '#rankingKeywordsTable tr:first-child td:first-child', popover: { title: 'Keyword Analysis', description: 'Clicking on the keyword will load the top 10 SERP results for the keyword', side: "right", align: 'center' } },
      { element: '#serpCard', popover: { title: 'Keyword Analysis', description: 'You can see the top 10 results for the selected keyword in this table including their Domain Authority.', side: "right", align: 'center' } },

      { popover: { title: 'Happy Keywording', description: 'And that is all, go ahead and make magic.' } }
    ]

    const driverObj = driver({
      showProgress: false,
      steps: navigation_steps
    });

    driverObj.drive();

  </script>
  <!--   Core JS Files   -->
  <script src="assets/js/core/jquery-3.7.1.min.js"></script>
  <script src="assets/js/core/popper.min.js"></script>
  <script src="assets/js/core/bootstrap.min.js"></script>

  <!-- jQuery Scrollbar -->
  <script src="assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>

  <!-- Chart JS -->
  <script src="assets/js/plugin/chart.js/chart.min.js"></script>

  <!-- jQuery Sparkline -->
  <script src="assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

  <!-- Chart Circle -->
  <script src="assets/js/plugin/chart-circle/circles.min.js"></script>

  <!-- Datatables -->
  <script src="assets/js/plugin/datatables/datatables.min.js"></script>

  <!-- Bootstrap Notify -->
  <script src="assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

  <!-- jQuery Vector Maps -->
  <script src="assets/js/plugin/jsvectormap/jsvectormap.min.js"></script>
  <script src="assets/js/plugin/jsvectormap/world.js"></script>

  <!-- Sweet Alert -->
  <script src="assets/js/plugin/sweetalert/sweetalert.min.js"></script>

  <!-- Kaiadmin JS -->
  <script src="assets/js/kaiadmin.min.js"></script>
</body>

</html>