<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Extractor</title>
    <style>
        body {
            font-family: sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        #input-section {
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        img {
            max-width: 100px;
            max-height: 100px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Image Extractor</h1>

        <div id="input-section">
            <label for="url-input">Enter URL:</label>
            <input type="url" id="url-input" size="60">
            <button id="extract-button">Extract Images</button>
        </div>

        <div id="results-section">
            <table id="image-table">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Image URL</th>
                        <th>Image Preview</th>
                        <th>Image Alt Text</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Image data will be added here by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.getElementById('extract-button').addEventListener('click', function() {
            const url = document.getElementById('url-input').value;
            if (url) {
                extractImages(url);
            } else {
                alert('Please enter a URL.');
            }
        });

        async function extractImages(url) {
            try {
                const response = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(url)); //Use allorigins to bypass CORS if needed.  Consider using a server-side proxy for production.
                const data = await response.json();

                console.log(data);

                if (data.contents) {
                    const html = data.contents;
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const images = doc.querySelectorAll('img');

                    const imageTableBody = document.querySelector('#image-table tbody');
                    imageTableBody.innerHTML = ''; // Clear previous results

                    if (images.length > 0) {
                        images.forEach((img, index) => {
                            const imageUrl = img.src;
                            const altText = img.alt;

                            const row = document.createElement('tr');

                            const noCell = document.createElement('td');
                            noCell.textContent = index + 1;
                            row.appendChild(noCell);

                            const urlCell = document.createElement('td');
                            urlCell.textContent = imageUrl;
                            row.appendChild(urlCell);

                            const previewCell = document.createElement('td');
                            const previewImage = document.createElement('img');
                            previewImage.src = imageUrl;
                            previewImage.alt = altText; // Use alt text in preview too
                            previewCell.appendChild(previewImage);
                            row.appendChild(previewCell);

                            const altTextCell = document.createElement('td');
                            altTextCell.textContent = altText;
                            row.appendChild(altTextCell);

                            imageTableBody.appendChild(row);
                        });
                    } else {
                        imageTableBody.innerHTML = '<tr><td colspan="4">No images found on this page.</td></tr>';
                    }
                } else {
                    alert('Failed to fetch content from the URL.  Check the URL and CORS settings.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while extracting images. See console for details.');
            }
        }
    </script>
</body>
</html>