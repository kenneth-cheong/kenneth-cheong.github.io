<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>MediaOne Marketing SG â€“ SEO Pillars Visualization for "SEO marketing Singapore"</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg-start: #0f111a;
      --bg-end: #1a1f2b;
      --panel: rgba(255,255,255,0.04);
      --card: rgba(255,255,255,0.08);
      --text: #eaeff4;
      --muted: #cbd5e1;
      --shadow: 0 10px 25px rgba(0,0,0,.25);
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: radial-gradient( circle at 20% -10%, rgba(60,180,200,.15), transparent 40% ),
                  radial-gradient( circle at 90% 0%, rgba(255,120,180,.15), transparent 40% ),
                  linear-gradient(135deg, var(--bg-start), var(--bg-end));
      color: var(--text);
      overflow: hidden;
    }
    header {
      position: absolute;
      top: 14px;
      left: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-radius: 12px;
      background: rgba(0,0,0,.25);
      backdrop-filter: saturate(1.2) blur(2px);
      box-shadow: var(--shadow);
      z-index: 5;
    }
    .brand {
      display: flex; align-items: center; gap: 12px;
    }
    .brand-logo {
      width: 38px; height: 38px; border-radius: 9px;
      background: linear-gradient(135deg, #4a90e2 0%, #a34bd6 100%);
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; color: #fff;
    }
    .brand-title { font-weight: 700; font-size: 16px; }
    .brand-sub { font-size: 12px; color: #d8e3f7; opacity: .95; }
    .panel {
      display: flex; align-items: center; gap: 12px;
    }
    .panel input {
      padding: 8px 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,.25);
      background: rgba(0,0,0,.25); color: #fff; outline: none;
    }
    #legend {
      position: absolute;
      top: 78px;
      left: 20px;
      width: 280px;
      padding: 12px 14px;
      border-radius: 12px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.15);
      box-shadow: var(--shadow);
      z-index: 5;
      font-size: 12px;
      color: #e5e7eb;
      line-height: 1.25;
    }
    #legend h4 { margin: 0 0 8px 0; font-size: 12px; text-transform: uppercase; letter-spacing: .08em; color: #e7e9f3; }
    .legend-item { display:flex; align-items:center; gap:8px; margin: 6px 0; }
    .legend-swatch { width:14px; height:14px; border-radius:3px; display:inline-block; }
    #graph {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100%; height: 100%;
    }
    .link {
      stroke: #99a3ad;
      stroke-opacity: 0.6;
    }
    .node text {
      font-size: 10px;
      pointer-events: none;
      fill: #fff;
    }
    .node circle {
      stroke: rgba(255,255,255,.6);
      stroke-width: 1.5px;
    }

    /* Responsive tweaks */
    @media (max-width: 980px){
      #legend { display: none; }
      header { left: 8px; right: 8px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="brand-logo">M</div>
      <div>
        <div class="brand-title">MediaOne Marketing SG</div>
        <div class="brand-sub">SEO Pillars Visualization for "SEO marketing Singapore"</div>
      </div>
    </div>
    <div class="panel" aria-label="Panel">
      <input id="searchBox" placeholder="Try filtering by URL (e.g., /seo-agency)" />
    </div>
  </header>

  <div id="legend" aria-label="Legend">
    <h4>Content Pillars</h4>
    <div class="legend-item"><span class="legend-swatch" style="background:#1f77b4"></span> SEO Services Singapore</div>
    <div class="legend-item"><span class="legend-swatch" style="background:#2ca02c"></span> Local SEO Singapore</div>
    <div class="legend-item"><span class="legend-swatch" style="background:#d62728"></span> SEO Pricing Singapore</div>
    <div class="legend-item"><span class="legend-swatch" style="background:#9467bd"></span> Content Marketing & SEO Synergy</div>
    <div class="legend-item"><span class="legend-swatch" style="background:#8c564b"></span> SEO Education & Basics</div>
  </div>

  <div id="graph" aria-label="Interactive force-directed graph"></div>

  <!-- D3.js v7 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // Data: Pillars and related URLs for MediaOne Marketing SG
    // Sources are derived from live MediaOne pages (seo- and content-related articles/pages)
    const pillars = [
      { id: 'p1', name: 'SEO Services Singapore', color: '#1f77b4', radius: 34, weight: 3 },
      { id: 'p2', name: 'Local SEO Singapore', color: '#2ca02c', radius: 34, weight: 2.5 },
      { id: 'p3', name: 'SEO Pricing Singapore', color: '#d62728', radius: 32, weight: 2.2 },
      { id: 'p4', name: 'Content Marketing & SEO Synergy', color: '#9467bd', radius: 34, weight: 2.4 },
      { id: 'p5', name: 'SEO Education & Basics', color: '#8c564b', radius: 32, weight: 2.0 }
    ];

    // URL nodes (existing pages on mediaonemarketing.com.sg)
    // Note: URLs shown are representative pages found on the domain related to SEO/marketing in SG.
    const urls = [
      { id: 'u1', url: 'https://mediaonemarketing.com.sg/', pillar: 'p1' },
      { id: 'u2', url: 'https://mediaonemarketing.com.sg/seo-agency/', pillar: 'p1' },
      { id: 'u3', url: 'https://mediaonemarketing.com.sg/mastering-seo-basics-a-beginners-guide/', pillar: 'p4' },
      { id: 'u4', url: 'https://mediaonemarketing.com.sg/top-15-seo-marketing-basics-for-singapore-smes/', pillar: 'p4' },
      { id: 'u5', url: 'https://mediaonemarketing.com.sg/customer-insights-strategies-in-singapore/', pillar: 'p4' },
      { id: 'u6', url: 'https://mediaonemarketing.com.sg/best-local-seo-guide/', pillar: 'p2' },
      { id: 'u7', url: 'https://mediaonemarketing.com.sg/why-you-need-to-work-with-a-local-seo-agency/', pillar: 'p2' },
      { id: 'u8', url: 'https://mediaonemarketing.com.sg/id/seo-pricing-singapore/', pillar: 'p3' },
      { id: 'u9', url: 'https://mediaonemarketing.com.sg/seo-pricing-singapore/', pillar: 'p3' }
    ];

    // Interconnections (illustrative cross-links between URLs and across pillars)
    // This creates a network of related content to improve topical interlinking visually.
    const crossLinks = [
      ['u2','u3'], ['u2','u4'], ['u3','u4'], ['u5','u4'], // pillar links within SG SEO content
      ['u6','u7'], ['u6','u5'], ['u7','u5'], // local SEO cross-links
      ['u8','u9'], // pricing variants
      ['u2','u6'], ['u3','u7'], ['u4','u5'] // cross-pillar interlinks
    ];

    // Build nodes array with type and display labels
    const nodes = [];
    // pillar nodes
    pillars.forEach(p => {
      nodes.push({ id: p.id, type: 'pillar', name: p.name, color: p.color, radius: p.radius, weight: p.weight, label: p.name });
    });
    // URL nodes
    urls.forEach(u => {
      const pillarObj = pillars.find(p => p.id === u.pillar);
      // label will be the URL string; shorten in display if needed by CSS (text wraps poorly)
      nodes.push({ id: u.id, type: 'url', label: u.url, pillar: u.pillar, color: '#7a7a7a', radius: 12, weight: 1, url: u.url });
    });

    // Build links: pillar -> URL
    let links = [];
    urls.forEach(u => {
      links.push({ source: u.pillar, target: u.id });
    });
    // cross-links between URLs
    crossLinks.forEach(pair => {
      const a = pair[0], b = pair[1];
      links.push({ source: a, target: b });
    });

    // Map for quick access
    const nodeById = new Map(nodes.map(n => [n.id, n]));
    // Convert to objects compatible with d3's link expectations
    const linksObjects = links
      .filter(l => nodeById.has(l.source) && nodeById.has(l.target))
      .map(l => ({
        source: nodeById.get(l.source),
        target: nodeById.get(l.target)
      }));

    // Dimensions and setup
    const container = document.getElementById('graph');
    const width = container.clientWidth;
    const height = Math.max(720, window.innerHeight - 100);

    const svg = d3.select(container)
      .append('svg')
      .attr('width', '100%')
      .attr('height', height)
      .attr('viewBox', [-width/2, -height/2, width, height])
      .style('background', 'transparent')
      .call(d3.zoom().on('zoom', (event) => {
        g.attr('transform', event.transform);
      }));

    const g = svg.append('g');

    // Force simulation
    const simulation = d3.forceSimulation(nodes)
      .force('link', d3.forceLink(linksObjects).distance(80).strength(0.9))
      .force('charge', d3.forceManyBody().strength(-120))
      .force('center', d3.forceCenter(0, 0))
      .force('collision', d3.forceCollide().radius(d => d.radius + 6).iterations(2))
      .on('tick', ticked);

    // Draw links (lines)
    const link = g.selectAll('.link')
      .data(linksObjects)
      .enter().append('line')
      .attr('class', 'link')
      .attr('stroke-width', 1.5)
      .attr('stroke', '#8a929e')
      .attr('opacity', 0.75);

    // Draw nodes (groups)
    const node = g.selectAll('.node')
      .data(nodes)
      .enter().append('g')
      .attr('class', d => 'node ' + d.type)
      .call(d3.drag()
        .on('start', dragstarted)
        .on('drag', dragged)
        .on('end', dragended))
      .on('mouseover', highlight)
      .on('mouseout', unhighlight);

    // Node visuals: circles
    node.append('circle')
      .attr('r', d => d.radius)
      .attr('fill', d => d.type === 'pillar' ? d.color : '#6e6e6e')
      .attr('opacity', d => d.type === 'pillar' ? 0.95 : 0.9);

    // Node labels (URLs and pillar names)
    node.append('text')
      .text(d => d.label)
      .attr('text-anchor', 'middle')
      .attr('dy', d => d.type === 'pillar' ? 4 : 0)
      .attr('fill', '#fff')
      .style('font-family', 'Arial, Sans-Serif')
      .style('font-size', d => d.type === 'pillar' ? '11px' : '9px')
      .style('pointer-events', 'none');

    // Helper: color brightness for readable text if needed (not strictly required here)
    function brightness(hex) {
      const c = hex.replace('#','');
      const r = parseInt(c.substring(0,2),16);
      const g = parseInt(c.substring(2,4),16);
      const b = parseInt(c.substring(4,6),16);
      return (r*299 + g*587 + b*114) / 1000;
    }

    // Interaction helpers
    function highlight(event, d){
      // highlight connected links and neighbors
      const connected = new Set();
      linksObjects.forEach(l => {
        if (l.source.id === d.id || l.target.id === d.id) {
          connected.add(l.source.id); connected.add(l.target.id);
        }
      });
      node.selectAll('circle').attr('stroke-width', n => connected.has(n.id) ? 3 : 1.5)
        .attr('opacity', n => connected.has(n.id) ? 1 : 0.5);
      link.style('opacity', l => (l.source.id === d.id || l.target.id === d.id) ? 1 : 0.15);
    }
    function unhighlight(){
      node.selectAll('circle').attr('stroke-width', 1.5).attr('opacity', 1);
      link.style('opacity', 0.75);
    }

    // Tick function: update positions
    function ticked() {
      link
        .attr('x1', d => d.source.x)
        .attr('y1', d => d.source.y)
        .attr('x2', d => d.target.x)
        .attr('y2', d => d.target.y);

      node.attr('transform', d => `translate(${d.x},${d.y})`);
    }

    // Drag handlers
    function dragstarted(event, d){
      if (!event.active) simulation.alphaTarget(0.3).restart();
      d.fx = d.x;
      d.fy = d.y;
    }
    function dragged(event, d){
      d.fx = event.x;
      d.fy = event.y;
    }
    function dragended(event, d){
      if (!event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }

    // Simple filter by URL/path in the legend
    const searchBox = document.getElementById('searchBox');
    if (searchBox) {
      searchBox.addEventListener('input', () => {
        const query = searchBox.value.trim().toLowerCase();
        node.style('display', n => {
          const label = (n.label || '').toString().toLowerCase();
          if (!query) return '';
          // show node if URL contains query or pillar name contains query
          if (n.type === 'pillar' && (n.name || '').toLowerCase().includes(query)) return '';
          if (n.type === 'url' && label.includes(query)) return '';
          return 'none';
        });
        link.style('display', l => {
          // If either end node is hidden, hide link
          const sVisible = (l.source.display !== 'none');
          const tVisible = (l.target.display !== 'none');
          return (sVisible && tVisible) ? '' : 'none';
        });
      });
    }

  </script>
</body>
</html>