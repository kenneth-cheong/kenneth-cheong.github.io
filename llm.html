<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SEO Marketing Singapore – Content Pillars for MediaOne Marketing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg: #0e1020;
      --card: rgba(255,255,255,0.08);
      --text: #e9eefc;
      --muted: #cbd5e1;
      --shadow: 0 10px 25px rgba(0,0,0,.25);
    }
    @font-face {
      font-family: 'InterVar';
      src: local('Inter'), local('Inter var'), url('https://fonts.gstatic.com/s/inter/v12/UcCO3FwrKkQnB3x7.ttf') format('truetype');
      font-weight: 100 900;
      font-display: swap;
    }
    html, body {
      height: 100%;
    }
    body {
      margin: 0;
      font-family: InterVar, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--text);
      background: radial-gradient( circle at 10% -10%, rgba(124,58,237,.25) 0%, rgba(124,58,237,0) 40% ),
                  radial-gradient( circle at 100% 0%, rgba(34,193,195,.25) 0%, rgba(34,193,195,0) 40% ),
                  linear-gradient(135deg, #0b1020 0%, #0a0f1a 60%, #0b1020 100%);
      background-attachment: fixed;
    }
    header {
      padding: 28px 20px 10px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 28px;
      letter-spacing: .2px;
      color: #fff;
      text-shadow: 0 2px 16px rgba(0,0,0,.25);
    }
    header p {
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 14px;
    }

    .container {
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 22px;
      padding: 0 20px 40px;
      align-items: start;
    }

    /* Side panel: existing pages and quick notes */
    .panel {
      background: rgba(12,15,28,.75);
      border-radius: 14px;
      padding: 14px 14px 8px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.08);
    }
    .panel h2 {
      font-size: 14px;
      margin: 6px 0 8px;
      text-transform: uppercase;
      letter-spacing: .2em;
      color: #dbe6ff;
    }
    .panel ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .panel li {
      padding: 6px 0;
      border-bottom: 1px dashed rgba(255,255,255,.08);
      font-size: 13px;
    }
    .panel a { color: #cfe3ff; text-decoration: none; }
    .panel a:hover { text-decoration: underline; }

    /* Visualization area */
    #viz {
      width: 100%;
      height: 720px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    svg { display: block; width: 100%; height: 100%; }

    /* Links & nodes aesthetics */
    .link {
      stroke: #aaaaaa;
      stroke-opacity: .8;
    }
    .node text {
      font-family: InterVar, sans-serif;
      font-size: 11px;
      fill: white;
      pointer-events: none;
    }
    .tooltip {
      position: absolute;
      padding: 8px 10px;
      background: rgba(0,0,0,.75);
      color: #fff;
      border-radius: 6px;
      font-family: InterVar, sans-serif;
      font-size: 12px;
      pointer-events: none;
      transform: translate(-50%, -150%);
      white-space: nowrap;
      z-index: 10;
      display: none;
    }

    .legend {
      display: flex; gap: 12px; flex-wrap: wrap;
      align-items: center;
      padding: 8px 0 0;
      color: var(--muted);
      font-size: 12px;
    }
    .legend .dot {
      width: 12px; height: 12px; display: inline-block; border-radius: 3px;
      vertical-align: middle; margin-right: 6px;
    }

    @media (max-width: 980px){
      .container { grid-template-columns: 1fr; }
      #viz { height: 640px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>SEO Marketing Singapore — Content Pillars for MediaOne Marketing</h1>
    <p>Target keyword: "SEO marketing Singapore" • Domain: mediaonemarketing.com.sg</p>
  </header>

  <main class="container" aria-label="Content Pillars Visualization">
    <section class="panel" aria-label="Existing pages on MediaOne Marketing Singapore">
      <h2>Existing pages on MediaOne Marketing Singapore (SEO-related)</h2>
      <ul id="existing-pages">
        <li><a href="https://mediaonemarketing.com.sg/seo-agency/" target="_blank" rel="noopener">SEO Agency</a></li>
        <li><a href="https://mediaonemarketing.com.sg/mastering-seo-basics-a-beginners-guide/" target="_blank" rel="noopener">Mastering SEO Basics: Beginner's Guide</a></li>
        <li><a href="https://mediaonemarketing.com.sg/best-local-seo-guide/" target="_blank" rel="noopener">Best Local SEO Guide</a></li>
        <li><a href="https://mediaonemarketing.com.sg/google-ads-agency-singapore/" target="_blank" rel="noopener">Google Ads Agency Singapore</a></li>
        <li><a href="https://mediaonemarketing.com.sg/5-seo-marketing-basics-every-singapore-sme-should-know/" target="_blank" rel="noopener">5 SEO Marketing Basics for Singapore SMEs</a></li>
      </ul>
    </section>

    <section aria-label="Graph Visualization" id="viz-wrap">
      <div id="viz"></div>
      <div class="legend" aria-label="Pillar legend" id="legend" style="margin-top:6px;">
        <!-- Legend will be populated by script -->
      </div>
      <div class="tooltip" id="tooltip" role="tooltip" aria-hidden="true"></div>
    </section>
  </main>

  <!-- D3.js (v7) -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // Pillar color definitions
    const colorByPillar = {
      local: "#1f77b4",        // Local SEO Singapore
      fundamentals: "#ff7f0e", // SEO Fundamentals & Strategy
      content: "#2ca02c",       // Content & On-Page SEO
      technical: "#d62728",     // Technical SEO & Site Performance
      links: "#9467bd"           // Link Building & Authority
    };

    // Pillars
    const pillars = [
      { id: "local", name: "Local SEO Singapore" },
      { id: "fundamentals", name: "SEO Fundamentals & Strategy" },
      { id: "content", name: "Content & On-Page SEO" },
      { id: "technical", name: "Technical SEO & Site Performance" },
      { id: "links", name: "Link Building & Authority" }
    ];

    // Existing pages on the site (pulled from current site content)
    // (Note: these are the actual pages discovered on the domain)
    const existingUrls = [
      { id: "u1", url: "https://mediaonemarketing.com.sg/seo-agency/", pillar: "fundamentals" },
      { id: "u2", url: "https://mediaonemarketing.com.sg/mastering-seo-basics-a-beginners-guide/", pillar: "fundamentals" },
      { id: "u3", url: "https://mediaonemarketing.com.sg/best-local-seo-guide/", pillar: "local" },
      { id: "u4", url: "https://mediaonemarketing.com.sg/google-ads-agency-singapore/", pillar: "fundamentals" },
      { id: "u5", url: "https://mediaonemarketing.com.sg/5-seo-marketing-basics-every-singapore-sme-should-know/", pillar: "fundamentals" }
    ];

    // New suggested URLs by pillar (for diversification and interlinking)
    // Each new URL has an id, path slug, and belongs to a pillar
    const newUrlsByPillar = {
      local: [
        { id: "nlocal1", url: "/local-seo-singapore-guide/", label: "/local-seo-singapore-guide/", pillar: "local" },
        { id: "nlocal2", url: "/local-seo-singapore-checklist/", label: "/local-seo-singapore-checklist/", pillar: "local" }
      ],
      fundamentals: [
        { id: "nfund1", url: "/seo-marketing-strategy-singapore/", label: "/seo-marketing-strategy-singapore/", pillar: "fundamentals" },
        { id: "nfund2", url: "/seo-audit-checklist-singapore/", label: "/seo-audit-checklist-singapore/", pillar: "fundamentals" }
      ],
      content: [
        { id: "ncont1", url: "/content-marketing-for-singapore-seo/", label: "/content-marketing-for-singapore-seo/", pillar: "content" },
        { id: "ncont2", url: "/on-page-seo-singapore/", label: "/on-page-seo-singapore/", pillar: "content" }
      ],
      technical: [
        { id: "ntech1", url: "/technical-seo-audit-singapore/", label: "/technical-seo-audit-singapore/", pillar: "technical" },
        { id: "ntech2", url: "/core-web-vitals-singapore/", label: "/core-web-vitals-singapore/", pillar: "technical" }
      ],
      links: [
        { id: "nlinks1", url: "/link-building-singapore-guide/", label: "/link-building-singapore-guide/", pillar: "links" },
        { id: "nlinks2", url: "/digital-pr-backlinks-singapore/", label: "/digital-pr-backlinks-singapore/", pillar: "links" }
      ]
    };

    // Build URL nodes (existing + new)
    const urlNodes = [];

    existingUrls.forEach(u => {
      urlNodes.push({
        id: u.id,
        type: "url",
        url: u.url,
        label: u.url, // display full URL in node
        pillarId: u.pillar,
        size: 12,
        color: colorByPillar[u.pillar]
      });
    });

    // Flatten and add new URL nodes
    Object.values(newUrlsByPillar).forEach(arr => arr.forEach(n => {
      urlNodes.push({
        id: n.id,
        type: "url",
        url: n.url,
        label: n.label,
        pillarId: n.pillar,
        size: 12,
        color: colorByPillar[n.pillar]
      });
    }));

    // Pillar nodes (five pillars)
    const pillarNodes = pillars.map(p => ({
      id: p.id,
      type: "pillar",
      name: p.name,
      color: colorByPillar[p.id],
      size: 28
    }));

    // Consolidate all nodes
    const allNodes = pillarNodes.concat(urlNodes);

    // Build links: every URL -> its pillar
    const links = [];

    urlNodes.forEach(u => {
      links.push({ source: u.id, target: u.pillarId });
    });

    // Interconnections: within each pillar, connect its URLs (existing + new)
    // Build mapping pillar -> URL IDs
    const idsByPillar = {};
    allNodes.forEach(n => {
      if (n.type === "url") {
        if (!idsByPillar[n.pillarId]) idsByPillar[n.pillarId] = [];
        idsByPillar[n.pillarId].push(n.id);
      }
    });

    Object.keys(idsByPillar).forEach(pId => {
      const list = idsByPillar[pId];
      // connect pairwise adjacent URLs within the same pillar
      for (let i = 0; i < list.length - 1; i++) {
        links.push({ source: list[i], target: list[i+1] });
      }
    });

    // Setup SVG canvas and force layout
    const container = document.getElementById('viz');
    const width = container.clientWidth;
    const height = 720;

    const svg = d3.select("#viz").append("svg")
      .attr("width", "100%")
      .attr("height", height);

    // Zoom/pan behavior
    const g = svg.append("g");
    const zoom = d3.zoom()
      .scaleExtent([0.4, 2.5])
      .on("zoom", (event) => {
        g.attr("transform", event.transform);
      });
    svg.call(zoom);

    // Define simulation
    const simulation = d3.forceSimulation(allNodes)
      .force("link", d3.forceLink(links).id(d => d.id).distance(120).strength(0.8 ))
      .force("charge", d3.forceManyBody().strength(-100))
      .force("center", d3.forceCenter(width / 2, height / 2))
      .force("collision", d3.forceCollide().radius(d => d.size - 50).iterations(1))
      .on("tick", ticked);

    // Draw links
    const link = g.append("g")
      .attr("stroke", "#aab4c4")
      .attr("stroke-width", 2)
      .attr("stroke-opacity", 0.8)
      .selectAll("line")
      .data(links)
      .enter().append("line")
      .attr("class", "link")
      .attr("marker-end", "url(#arrowhead)");

    // Arrowheads for aesthetics
    svg.append("defs").selectAll("marker")
      .data(["arrow"])
      .enter().append("marker")
      .attr("id", "arrowhead")
      .attr("viewBox", "0 -5 10 10")
      .attr("refX", 15)
      .attr("refY", 0)
      .attr("markerWidth", 6)
      .attr("markerHeight", 6)
      .attr("orient", "auto")
      .append("path")
      .attr("d", "M0,-5L10,0L0,5")
      .attr("fill", "#aab4c4");

    // Draw nodes (group each node: circle + label)
    const node = g.selectAll(".node")
      .data(allNodes)
      .enter().append("g")
      .attr("class", "node")
      .call(d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended)
      );

    // Circle
    node.append("circle")
      .attr("r", d => d.size)
      .attr("fill", d => d.color)
      .attr("stroke", d => d3.rgb(d.color).darker())
      .attr("stroke-width", 1.5)
      .on("mouseover", (event, d) => showTooltip(event, d))
      .on("mouseout", () => hideTooltip());

    // Labels (URL nodes show the URL, Pillars show the pillar name)
    node.append("text")
      .text(d => d.type === "pillar" ? d.name : truncateLabel(d.label || d.url))
      .attr("text-anchor", "middle")
      .attr("dy", d =>  d.type === "pillar" ? 4 : 4)
      .attr("dx", 0)
      .style("font-family", "InterVar, sans-serif")
      .style("font-size", "11px")
      .style("pointer-events", "none");

    // Tooltip handling
    const tooltip = document.getElementById('tooltip');
    function showTooltip(event, d) {
      const content = d.type === "pillar"
        ? "Pillar: " + d.name
        : "URL: " + d.url;
      tooltip.style.display = "block";
      tooltip.style.left = (event.pageX) + "px";
      tooltip.style.top  = (event.pageY) + "px";
      tooltip.innerHTML = content;
      tooltip.style.opacity = "1";
    }
    function hideTooltip() {
      tooltip.style.display = "none";
      tooltip.style.opacity = "0";
      tooltip.innerHTML = "";
    }

    // Helper to truncate long labels for display
    function truncateLabel(text) {
      if (!text) return "";
      const t = text.length > 42 ? text.substring(0, 39) + "…" : text;
      return t;
    }

    // Drag behavior
    function dragstarted(event, d) {
      if (!event.active) simulation.alphaTarget(0.3).restart();
      d.fx = d.x;
      d.fy = d.y;
    }
    function dragged(event, d) {
      d.fx = event.x;
      d.fy = event.y;
    }
    function dragended(event, d) {
      if (!event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }

    // Tick: update positions
    function ticked() {
      // Update links
      link.attr("x1", d => d.source.x)
          .attr("y1", d => d.source.y)
          .attr("x2", d => d.target.x)
          .attr("y2", d => d.target.y);

      // Update nodes
      node.attr("transform", d => `translate(${d.x},${d.y})`);

      // Optional: push labels slightly out from nodes for readability
      node.select("text")
        .attr("x", 0)
        .attr("y", d => d.type === "pillar" ? d.size + 14 : d.size + 14);
      // Keep circles visually on top
      node.select("circle").raise();
    }

    // Legend generation (colors per pillar)
    const legend = document.getElementById('legend');
    const legendItems = [
      { key: 'Local SEO Singapore', color: colorByPillar.local },
      { key: 'SEO Fundamentals & Strategy', color: colorByPillar.fundamentals },
      { key: 'Content & On-Page SEO', color: colorByPillar.content },
      { key: 'Technical SEO & Site Performance', color: colorByPillar.technical },
      { key: 'Link Building & Authority', color: colorByPillar.links }
    ];
    legend.innerHTML = legendItems.map(item =>
      `<span><span class="dot" style="background:${item.color}"></span>${item.key}</span>`
    ).join("  ");

    // Responsive resize (optional enhancement)
    window.addEventListener('resize', () => {
      // For a fully responsive layout you could re-render; omitted for clarity
    });
  </script>
</body>
</html>